<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=2">
<meta name="theme-color" content="#222">
<meta name="generator" content="Hexo 5.2.0">


  <link rel="apple-touch-icon" sizes="180x180" href="/images/apple-touch-icon-next.png">
  <link rel="icon" type="image/png" sizes="32x32" href="/images/icon.png">
  <link rel="icon" type="image/png" sizes="16x16" href="/images/icon.png">
  <link rel="mask-icon" href="/images/logo.svg" color="#222">

<link rel="stylesheet" href="/css/main.css">



<link rel="stylesheet" href="//cdn.jsdelivr.net/npm/@fortawesome/fontawesome-free@5.15.1/css/all.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/animate.css@3.1.1/animate.min.css">
  <link rel="stylesheet" href="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.css">
  <script src="//cdn.jsdelivr.net/npm/nprogress@0.2.0/nprogress.js"></script>

<script class="hexo-configurations">
    var NexT = window.NexT || {};
    var CONFIG = {"hostname":"blog.zerchin.xyz","root":"/","images":"/images","scheme":"Gemini","version":"8.1.0","exturl":false,"sidebar":{"position":"left","display":"post","padding":18,"offset":12},"copycode":true,"bookmark":{"enable":false,"color":"#222","save":"auto"},"fancybox":false,"mediumzoom":true,"lazyload":false,"pangu":false,"comments":{"style":"tabs","active":null,"storage":true,"lazyload":false,"nav":null},"motion":{"enable":true,"async":false,"transition":{"post_block":"fadeIn","post_header":"fadeInDown","post_body":"fadeInDown","coll_header":"fadeInLeft","sidebar":"fadeInUp"}},"prism":false,"i18n":{"placeholder":"搜索...","empty":"没有找到任何搜索结果：${query}","hits_time":"找到 ${hits} 个搜索结果（用时 ${time} 毫秒）","hits":"找到 ${hits} 个搜索结果"},"path":"/search.xml","localsearch":{"enable":true,"trigger":"auto","top_n_per_article":1,"unescape":false,"preload":false}};
  </script>
<meta name="description" content="Zun是OpenStack中提供容器服务的组件以下纯安装过程，基于OpenStack queens版本 环境">
<meta property="og:type" content="article">
<meta property="og:title" content="openstack（queens）部署Zun服务">
<meta property="og:url" content="http://blog.zerchin.xyz/2018/10/04/openstack%EF%BC%88queens%EF%BC%89%E9%83%A8%E7%BD%B2Zun%E6%9C%8D%E5%8A%A1/index.html">
<meta property="og:site_name" content="zerchin 云技术栈">
<meta property="og:description" content="Zun是OpenStack中提供容器服务的组件以下纯安装过程，基于OpenStack queens版本 环境">
<meta property="og:locale" content="zh_CN">
<meta property="article:published_time" content="2018-10-04T18:20:21.000Z">
<meta property="article:modified_time" content="2022-07-19T08:23:02.047Z">
<meta property="article:author" content="zerchin">
<meta property="article:tag" content="openstack">
<meta name="twitter:card" content="summary">


<link rel="canonical" href="http://blog.zerchin.xyz/2018/10/04/openstack%EF%BC%88queens%EF%BC%89%E9%83%A8%E7%BD%B2Zun%E6%9C%8D%E5%8A%A1/">


<script class="page-configurations">
  // https://hexo.io/docs/variables.html
  CONFIG.page = {
    sidebar: "",
    isHome : false,
    isPost : true,
    lang   : 'zh-CN'
  };
</script>
<title>openstack（queens）部署Zun服务 | zerchin 云技术栈</title>
  



  <noscript>
  <style>
  body { margin-top: 2rem; }

  .use-motion .menu-item,
  .use-motion .sidebar,
  .use-motion .post-block,
  .use-motion .pagination,
  .use-motion .comments,
  .use-motion .post-header,
  .use-motion .post-body,
  .use-motion .collection-header {
    visibility: visible;
  }

  .use-motion .header,
  .use-motion .site-brand-container .toggle,
  .use-motion .footer { opacity: initial; }

  .use-motion .site-title,
  .use-motion .site-subtitle,
  .use-motion .custom-logo-image {
    opacity: initial;
    top: initial;
  }

  .use-motion .logo-line {
    transform: scaleX(1);
  }

  .search-pop-overlay, .sidebar-nav { display: none; }
  .sidebar-panel { display: block; }
  </style>
</noscript>

</head>

<body itemscope itemtype="http://schema.org/WebPage" class="use-motion">
  <div class="headband"></div>

  <main class="main">
    <header class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-brand-container">
  <div class="site-nav-toggle">
    <div class="toggle" aria-label="切换导航栏">
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
        <span class="toggle-line"></span>
    </div>
  </div>

  <div class="site-meta">

    <a href="/" class="brand" rel="start">
      <i class="logo-line"></i>
      <h1 class="site-title">zerchin 云技术栈</h1>
      <i class="logo-line"></i>
    </a>
      <p class="site-subtitle" itemprop="description">Kubernetes && Openstack engineer</p>
  </div>

  <div class="site-nav-right">
    <div class="toggle popup-trigger">
        <i class="fa fa-search fa-fw fa-lg"></i>
    </div>
  </div>
</div>



<nav class="site-nav">
  <ul class="main-menu menu">
        <li class="menu-item menu-item-home">

    <a href="/" rel="section"><i class="fa fa-home fa-fw"></i>首页</a>

  </li>
        <li class="menu-item menu-item-about">

    <a href="/about/" rel="section"><i class="fa fa-user fa-fw"></i>关于</a>

  </li>
        <li class="menu-item menu-item-tags">

    <a href="/tags/" rel="section"><i class="fa fa-tags fa-fw"></i>标签<span class="badge">42</span></a>

  </li>
        <li class="menu-item menu-item-categories">

    <a href="/categories/" rel="section"><i class="fa fa-th fa-fw"></i>分类<span class="badge">26</span></a>

  </li>
        <li class="menu-item menu-item-archives">

    <a href="/archives/" rel="section"><i class="fa fa-archive fa-fw"></i>归档<span class="badge">86</span></a>

  </li>
      <li class="menu-item menu-item-search">
        <a role="button" class="popup-trigger"><i class="fa fa-search fa-fw"></i>搜索
        </a>
      </li>
  </ul>
</nav>



  <div class="search-pop-overlay">
    <div class="popup search-popup"><div class="search-header">
  <span class="search-icon">
    <i class="fa fa-search"></i>
  </span>
  <div class="search-input-container">
    <input autocomplete="off" autocapitalize="off" maxlength="80"
           placeholder="搜索..." spellcheck="false"
           type="search" class="search-input">
  </div>
  <span class="popup-btn-close">
    <i class="fa fa-times-circle"></i>
  </span>
</div>
<div class="search-result-container no-result">
  <div class="search-result-icon">
    <i class="fa fa-spinner fa-pulse fa-5x"></i>
  </div>
</div>

    </div>
  </div>

</div>
        
  
  <div class="toggle sidebar-toggle">
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
    <span class="toggle-line"></span>
  </div>

  <aside class="sidebar">

    <div class="sidebar-inner sidebar-nav-active sidebar-toc-active">
      <ul class="sidebar-nav">
        <li class="sidebar-nav-toc">
          文章目录
        </li>
        <li class="sidebar-nav-overview">
          站点概览
        </li>
      </ul>

      <div class="sidebar-panel-container">
        <!--noindex-->
        <section class="post-toc-wrap sidebar-panel">
            <div class="post-toc animated"><ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%8E%AF%E5%A2%83"><span class="nav-number">1.</span> <span class="nav-text">环境</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BA%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">2.</span> <span class="nav-text">创建数据库</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%88%9B%E5%BB%BAopenstack%E7%94%A8%E6%88%B7%E3%80%81%E6%9C%8D%E5%8A%A1%E3%80%81%E7%AB%AF%E7%82%B9"><span class="nav-number">3.</span> <span class="nav-text">创建openstack用户、服务、端点</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#3-%E5%9C%A8controller%E8%8A%82%E7%82%B9%E4%B8%8A%E5%AE%89%E8%A3%85zun%E6%9C%8D%E5%8A%A1"><span class="nav-number">4.</span> <span class="nav-text">3. 在controller节点上安装zun服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-1-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7%E3%80%81%E7%BB%84"><span class="nav-number">4.1.</span> <span class="nav-text">3.1 创建用户、组</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="nav-number">4.2.</span> <span class="nav-text">3.2 创建目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-3-%E5%AE%89%E8%A3%85zun"><span class="nav-number">4.3.</span> <span class="nav-text">3.3 安装zun</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-4-%E7%94%9F%E6%88%90%E7%A4%BA%E4%BE%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.4.</span> <span class="nav-text">3.4 生成示例配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-5-%E5%A4%8D%E5%88%B6api-paste-ini%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.5.</span> <span class="nav-text">3.5 复制api-paste.ini配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-6-%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6-%E5%9C%A8%E5%90%88%E9%80%82%E4%BD%8D%E7%BD%AE%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9"><span class="nav-number">4.6.</span> <span class="nav-text">3.6 编辑配置文件,在合适位置添加以下内容</span></a></li></ol></li></ol></li><li class="nav-item nav-level-1"><a class="nav-link" href="#vi-etc-zun-zun-conf"><span class="nav-number"></span> <span class="nav-text">vi &#x2F;etc&#x2F;zun&#x2F;zun.conf</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#3-7-%E5%A1%AB%E5%85%85%E6%95%B0%E6%8D%AE%E5%BA%93"><span class="nav-number">0.1.</span> <span class="nav-text">3.7 填充数据库</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-8-%E5%88%9B%E5%BB%BA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="nav-number">0.2.</span> <span class="nav-text">3.8 创建启动文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#3-9-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="nav-number">0.3.</span> <span class="nav-text">3.9 启动服务</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#4-%E5%9C%A8compute%E8%8A%82%E7%82%B9%E4%B8%8A%E5%AE%89%E8%A3%85docker-ce"><span class="nav-number">1.</span> <span class="nav-text">4 在compute节点上安装docker-ce</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#4-1-%E5%8D%B8%E8%BD%BD%E6%97%A7%E7%89%88%E6%9C%AC%E7%9A%84docker"><span class="nav-number">1.1.</span> <span class="nav-text">4.1 卸载旧版本的docker</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-2-%E5%AE%89%E8%A3%85%E4%BE%9D%E8%B5%96%E5%8C%85"><span class="nav-number">1.2.</span> <span class="nav-text">4.2 安装依赖包</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-3-%E6%B7%BB%E5%8A%A0yum%E9%98%BF%E9%87%8C%E6%BA%90"><span class="nav-number">1.3.</span> <span class="nav-text">4.3 添加yum阿里源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-4-%E6%9B%B4%E6%96%B0yum%E6%BA%90"><span class="nav-number">1.4.</span> <span class="nav-text">4.4 更新yum源</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-5-%E5%AE%89%E8%A3%85docker-ce"><span class="nav-number">1.5.</span> <span class="nav-text">4.5 安装docker-ce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-6-%E5%90%AF%E5%8A%A8docker-ce"><span class="nav-number">1.6.</span> <span class="nav-text">4.6 启动docker-ce</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#4-7-%E6%B7%BB%E5%8A%A0%E5%86%85%E6%A0%B8%E9%85%8D%E7%BD%AE%E5%8F%82%E6%95%B0"><span class="nav-number">1.7.</span> <span class="nav-text">4.7 添加内核配置参数</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#5-%E5%9C%A8controller%E8%8A%82%E7%82%B9%E4%B8%8A%E6%B7%BB%E5%8A%A0kuryr-libnetwork%E7%94%A8%E6%88%B7"><span class="nav-number">2.</span> <span class="nav-text">5 在controller节点上添加kuryr-libnetwork用户</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#5-1-%E5%88%9B%E5%BB%BAkuryr%E7%94%A8%E6%88%B7"><span class="nav-number">2.1.</span> <span class="nav-text">5.1 创建kuryr用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#5-2-%E6%B7%BB%E5%8A%A0%E8%A7%92%E8%89%B2"><span class="nav-number">2.2.</span> <span class="nav-text">5.2 添加角色</span></a></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#6-%E5%9C%A8compute%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85kuryr-libnetwork"><span class="nav-number">3.</span> <span class="nav-text">6 在compute节点安装kuryr-libnetwork</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#6-1-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="nav-number">3.1.</span> <span class="nav-text">6.1 创建用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="nav-number">3.2.</span> <span class="nav-text">6.2 创建目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-3-%E5%AE%89%E8%A3%85kuryr-libnetwork"><span class="nav-number">3.3.</span> <span class="nav-text">6.3 安装kuryr-libnetwork</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-4-%E7%94%9F%E6%88%90%E7%A4%BA%E4%BE%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">3.4.</span> <span class="nav-text">6.4 生成示例配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-5-%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9"><span class="nav-number">3.5.</span> <span class="nav-text">6.5 编辑配置文件，添加以下内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-6-%E5%88%9B%E5%BB%BA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="nav-number">3.6.</span> <span class="nav-text">6.6 创建启动文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-7-%E5%90%AF%E5%8A%A8%E6%9C%8D%E5%8A%A1"><span class="nav-number">3.7.</span> <span class="nav-text">6.7 启动服务</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#6-8-%E9%AA%8C%E8%AF%81"><span class="nav-number">3.8.</span> <span class="nav-text">6.8 验证</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#6-8-1-%E5%88%9B%E5%BB%BAkuryr%E7%BD%91%E7%BB%9C"><span class="nav-number">3.8.1.</span> <span class="nav-text">6.8.1 创建kuryr网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-8-2-%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C"><span class="nav-number">3.8.2.</span> <span class="nav-text">6.8.2 查看网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#6-8-3-%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8"><span class="nav-number">3.8.3.</span> <span class="nav-text">6.8.3 创建容器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#7-%E5%9C%A8compute%E8%8A%82%E7%82%B9%E5%AE%89%E8%A3%85zun%E6%9C%8D%E5%8A%A1"><span class="nav-number">4.</span> <span class="nav-text">7 在compute节点安装zun服务</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#7-1-%E5%88%9B%E5%BB%BA%E7%94%A8%E6%88%B7"><span class="nav-number">4.1.</span> <span class="nav-text">7.1 创建用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-2-%E5%88%9B%E5%BB%BA%E7%9B%AE%E5%BD%95"><span class="nav-number">4.2.</span> <span class="nav-text">7.2 创建目录</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-3-%E5%AE%89%E8%A3%85zun"><span class="nav-number">4.3.</span> <span class="nav-text">7.3 安装zun</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-4-%E7%94%9F%E6%88%90%E7%A4%BA%E4%BE%8B%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.4.</span> <span class="nav-text">7.4 生成示例配置文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-5-%E9%85%8D%E7%BD%AEzun%E7%94%A8%E6%88%B7"><span class="nav-number">4.5.</span> <span class="nav-text">7.5 配置zun用户</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-6-%E7%BC%96%E8%BE%91%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9"><span class="nav-number">4.6.</span> <span class="nav-text">7.6 编辑配置文件，添加以下内容</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-7-%E9%85%8D%E7%BD%AEdocker%E5%92%8Ckuryr"><span class="nav-number">4.7.</span> <span class="nav-text">7.7 配置docker和kuryr</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#7-7-1-%E5%88%9B%E5%BB%BAdocker%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%E5%A4%B9"><span class="nav-number">4.7.1.</span> <span class="nav-text">7.7.1 创建docker配置文件夹</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-7-2-%E5%88%9B%E5%BB%BAdocker%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6"><span class="nav-number">4.7.2.</span> <span class="nav-text">7.7.2 创建docker配置文件</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-7-3-%E9%87%8D%E5%90%AFdocker"><span class="nav-number">4.7.3.</span> <span class="nav-text">7.7.3 重启docker</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-7-4-%E7%BC%96%E8%BE%91kuryr%E9%85%8D%E7%BD%AE%E6%96%87%E4%BB%B6%EF%BC%8C%E6%B7%BB%E5%8A%A0%E4%BB%A5%E4%B8%8B%E5%86%85%E5%AE%B9"><span class="nav-number">4.7.4.</span> <span class="nav-text">7.7.4 编辑kuryr配置文件，添加以下内容</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#7-7-5-%E9%87%8D%E5%90%AFkuryr"><span class="nav-number">4.7.5.</span> <span class="nav-text">7.7.5 重启kuryr</span></a></li></ol></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-8-%E5%88%9B%E5%BB%BA%E5%90%AF%E5%8A%A8%E6%96%87%E4%BB%B6"><span class="nav-number">4.8.</span> <span class="nav-text">7.8 创建启动文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-9-%E5%90%AF%E5%8A%A8zun-compute"><span class="nav-number">4.9.</span> <span class="nav-text">7.9 启动zun-compute</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#7-10-%E9%AA%8C%E8%AF%81"><span class="nav-number">4.10.</span> <span class="nav-text">7.10 验证</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#8-%E5%9C%A8controller%E8%8A%82%E7%82%B9%E5%90%AF%E5%8A%A8%E4%B8%80%E4%B8%AA%E5%AE%B9%E5%99%A8%E5%AE%9E%E4%BE%8B"><span class="nav-number">4.11.</span> <span class="nav-text">8 在controller节点启动一个容器实例</span></a><ol class="nav-child"><li class="nav-item nav-level-4"><a class="nav-link" href="#8-1-%E6%9F%A5%E7%9C%8B%E7%BD%91%E7%BB%9C"><span class="nav-number">4.11.1.</span> <span class="nav-text">8.1 查看网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-2-%E8%8E%B7%E5%8F%96%E7%BD%91%E7%BB%9Cid"><span class="nav-number">4.11.2.</span> <span class="nav-text">8.2 获取网络id</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-3-%E5%88%9B%E5%BB%BA%E5%AE%B9%E5%99%A8"><span class="nav-number">4.11.3.</span> <span class="nav-text">8.3 创建容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-4-%E6%9F%A5%E7%9C%8B%E5%AE%B9%E5%99%A8%E5%88%97%E8%A1%A8"><span class="nav-number">4.11.4.</span> <span class="nav-text">8.4 查看容器列表</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-5-%E6%89%A7%E8%A1%8Csh%E5%91%BD%E4%BB%A4"><span class="nav-number">4.11.5.</span> <span class="nav-text">8.5 执行sh命令</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-6-%E9%AA%8C%E8%AF%81%E7%BD%91%E7%BB%9C"><span class="nav-number">4.11.6.</span> <span class="nav-text">8.6 验证网络</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-7-%E5%81%9C%E6%AD%A2%E5%AE%B9%E5%99%A8"><span class="nav-number">4.11.7.</span> <span class="nav-text">8.7 停止容器</span></a></li><li class="nav-item nav-level-4"><a class="nav-link" href="#8-8-%E5%88%A0%E9%99%A4%E5%AE%B9%E5%99%A8"><span class="nav-number">4.11.8.</span> <span class="nav-text">8.8 删除容器</span></a></li></ol></li></ol></li><li class="nav-item nav-level-2"><a class="nav-link" href="#9-%E5%AE%89%E8%A3%85zun-ui"><span class="nav-number">5.</span> <span class="nav-text">9 安装zun-ui</span></a><ol class="nav-child"><li class="nav-item nav-level-3"><a class="nav-link" href="#9-1-%E4%B8%8B%E8%BD%BDzun%E6%BA%90%E6%96%87%E4%BB%B6"><span class="nav-number">5.1.</span> <span class="nav-text">9.1 下载zun源文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-2-%E5%A4%8D%E5%88%B6%E6%96%87%E4%BB%B6"><span class="nav-number">5.2.</span> <span class="nav-text">9.2 复制文件</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-3-%E5%AE%89%E8%A3%85ui%E6%A8%A1%E5%9D%97"><span class="nav-number">5.3.</span> <span class="nav-text">9.3 安装ui模块</span></a></li><li class="nav-item nav-level-3"><a class="nav-link" href="#9-4-%E9%87%8D%E5%90%AF%E6%9C%8D%E5%8A%A1"><span class="nav-number">5.4.</span> <span class="nav-text">9.4 重启服务</span></a></li></ol></li></ol></div>
        </section>
        <!--/noindex-->

        <section class="site-overview-wrap sidebar-panel">
          <div class="site-author site-overview-item animated" itemprop="author" itemscope itemtype="http://schema.org/Person">
    <img class="site-author-image" itemprop="image" alt="zerchin"
      src="/images/ghost_dead.jpg">
  <p class="site-author-name" itemprop="name">zerchin</p>
  <div class="site-description" itemprop="description">云原生技术</div>
</div>
<div class="site-state-wrap site-overview-item animated">
  <nav class="site-state">
      <div class="site-state-item site-state-posts">
          <a href="/archives/">
        
          <span class="site-state-item-count">86</span>
          <span class="site-state-item-name">日志</span>
        </a>
      </div>
      <div class="site-state-item site-state-categories">
            <a href="/categories/">
          
        <span class="site-state-item-count">26</span>
        <span class="site-state-item-name">分类</span></a>
      </div>
      <div class="site-state-item site-state-tags">
            <a href="/tags/">
          
        <span class="site-state-item-count">42</span>
        <span class="site-state-item-name">标签</span></a>
      </div>
  </nav>
</div>
  <div class="links-of-author site-overview-item animated">
      <span class="links-of-author-item">
        <a href="mailto:zerchin@163.com" title="E-Mail → mailto:zerchin@163.com" rel="noopener" target="_blank"><i class="fa fa-envelope fa-fw"></i></a>
      </span>
  </div>



        </section>
      </div>
        <div class="back-to-top animated">
          <i class="fa fa-arrow-up"></i>
          <span>0%</span>
        </div>
    </div>
  </aside>
  <div class="sidebar-dimmer"></div>


    </header>

    
  <div class="reading-progress-bar"></div>

<noscript>
  <div class="noscript-warning">Theme NexT works best with JavaScript enabled</div>
</noscript>


    <div class="main-inner post posts-expand">


  


<div class="post-block">
  
  

  <article itemscope itemtype="http://schema.org/Article" class="post-content" lang="zh-CN">
    <link itemprop="mainEntityOfPage" href="http://blog.zerchin.xyz/2018/10/04/openstack%EF%BC%88queens%EF%BC%89%E9%83%A8%E7%BD%B2Zun%E6%9C%8D%E5%8A%A1/">

    <span hidden itemprop="author" itemscope itemtype="http://schema.org/Person">
      <meta itemprop="image" content="/images/ghost_dead.jpg">
      <meta itemprop="name" content="zerchin">
      <meta itemprop="description" content="云原生技术">
    </span>

    <span hidden itemprop="publisher" itemscope itemtype="http://schema.org/Organization">
      <meta itemprop="name" content="zerchin 云技术栈">
    </span>
      <header class="post-header">
        <h1 class="post-title" itemprop="name headline">
          openstack（queens）部署Zun服务
        </h1>

        <div class="post-meta-container">
          <div class="post-meta">
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-calendar"></i>
      </span>
      <span class="post-meta-item-text">发表于</span>

      <time title="创建时间：2018-10-04 18:20:21" itemprop="dateCreated datePublished" datetime="2018-10-04T18:20:21+00:00">2018-10-04</time>
    </span>
      <span class="post-meta-item">
        <span class="post-meta-item-icon">
          <i class="far fa-calendar-check"></i>
        </span>
        <span class="post-meta-item-text">更新于</span>
        <time title="修改时间：2022-07-19 08:23:02" itemprop="dateModified" datetime="2022-07-19T08:23:02+00:00">2022-07-19</time>
      </span>
    <span class="post-meta-item">
      <span class="post-meta-item-icon">
        <i class="far fa-folder"></i>
      </span>
      <span class="post-meta-item-text">分类于</span>
        <span itemprop="about" itemscope itemtype="http://schema.org/Thing">
          <a href="/categories/openstack/" itemprop="url" rel="index"><span itemprop="name">openstack</span></a>
        </span>
    </span>

  
    <span class="post-meta-item" title="阅读次数" id="busuanzi_container_page_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="far fa-eye"></i>
      </span>
      <span class="post-meta-item-text">阅读次数：</span>
      <span id="busuanzi_value_page_pv"></span>
    </span>
</div>

        </div>
      </header>

    
    
    
    <div class="post-body" itemprop="articleBody">
        <p>Zun是OpenStack中提供容器服务的组件<br>以下纯安装过程，基于OpenStack queens版本</p>
<h2 id="环境"><a href="#环境" class="headerlink" title="环境"></a>环境</h2><p>controller：192.168.152.101<br>compute：192.168.152.102</p>
<h2 id="创建数据库"><a href="#创建数据库" class="headerlink" title="创建数据库"></a>创建数据库</h2><p><strong>controller节点</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mysql -uroot -p000000</span><br><span class="line">Welcome to the MariaDB monitor. Commands end with ; or \\g.</span><br><span class="line">Your MariaDB connection id is 125</span><br><span class="line">Server version: 10.1.20-MariaDB MariaDB Server</span><br><span class="line">Copyright (c) 2000, 2016, Oracle, MariaDB Corporation Ab and others.</span><br><span class="line">Type &#39;help;&#39; or &#39;\\h&#39; for help. Type &#39;\\c&#39; to clear the current input statement.</span><br><span class="line">MariaDB [(none)]&gt; CREATE DATABASE zun;</span><br><span class="line">Query OK, 1 row affected (0.00 sec)</span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on zun.* to &#39;zun&#39;@&#39;localhost&#39;</span><br><span class="line">identified by &#39;000000&#39;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br><span class="line">MariaDB [(none)]&gt; grant all privileges on zun.* to &#39;zun&#39;@&#39;%&#39; identified by</span><br><span class="line">&#39;000000&#39;;</span><br><span class="line">Query OK, 0 rows affected (0.00 sec)</span><br></pre></td></tr></table></figure>
<h2 id="创建openstack用户、服务、端点"><a href="#创建openstack用户、服务、端点" class="headerlink" title="创建openstack用户、服务、端点"></a>创建openstack用户、服务、端点</h2><p><strong>controller节点</strong></p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# . admin-openrc</span><br><span class="line">[root@controller ~]# openstack user create --domain default</span><br><span class="line">--password-prompt zun</span><br><span class="line">User Password:</span><br><span class="line">Repeat User Password:</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id | default |</span><br><span class="line">| enabled | True |</span><br><span class="line">| id | 30f17f5a1baf48febb4260d6526267e4 |</span><br><span class="line">| name | zun |</span><br><span class="line">| options | &#123;&#125; |</span><br><span class="line">| password_expires_at | None |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack role add --project service --user zun</span><br><span class="line">admin</span><br><span class="line">[root@controller ~]# openstack service create --name zun --description</span><br><span class="line">&quot;Container Service&quot; container</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">| description | Container Service |</span><br><span class="line">| enabled | True |</span><br><span class="line">| id | 8f23b99db9d8456a8a51535903322275 |</span><br><span class="line">| name | zun |</span><br><span class="line">| type | container |</span><br><span class="line">+-------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne container</span><br><span class="line">public http:&#x2F;&#x2F;controller:9517&#x2F;v1</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled | True |</span><br><span class="line">| id | 8a5b474912a340d3993d094e21bcdc51 |</span><br><span class="line">| interface | public |</span><br><span class="line">| region | RegionOne |</span><br><span class="line">| region_id | RegionOne |</span><br><span class="line">| service_id | 8f23b99db9d8456a8a51535903322275 |</span><br><span class="line">| service_name | zun |</span><br><span class="line">| service_type | container |</span><br><span class="line">| url | http:&#x2F;&#x2F;controller:9517&#x2F;v1 |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne container</span><br><span class="line">internal http:&#x2F;&#x2F;controller:9517&#x2F;v1</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled | True |</span><br><span class="line">| id | 7ecfa6c448fe4a769617b26439e48598 |</span><br><span class="line">| interface | internal |</span><br><span class="line">| region | RegionOne |</span><br><span class="line">| region_id | RegionOne |</span><br><span class="line">| service_id | 8f23b99db9d8456a8a51535903322275 |</span><br><span class="line">| service_name | zun |</span><br><span class="line">| service_type | container |</span><br><span class="line">| url | http:&#x2F;&#x2F;controller:9517&#x2F;v1 |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">[root@controller ~]# openstack endpoint create --region RegionOne container</span><br><span class="line">admin http:&#x2F;&#x2F;controller:9517&#x2F;v1</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+--------------+----------------------------------+</span><br><span class="line">| enabled | True |</span><br><span class="line">| id | cfba36a4071b4cf187990ccea63b2161 |</span><br><span class="line">| interface | admin |</span><br><span class="line">| region | RegionOne |</span><br><span class="line">| region_id | RegionOne |</span><br><span class="line">| service_id | 8f23b99db9d8456a8a51535903322275 |</span><br><span class="line">| service_name | zun |</span><br><span class="line">| service_type | container |</span><br><span class="line">| url | http:&#x2F;&#x2F;controller:9517&#x2F;v1 |</span><br><span class="line">+--------------+----------------------------------+</span><br></pre></td></tr></table></figure>
<h2 id="3-在controller节点上安装zun服务"><a href="#3-在controller节点上安装zun服务" class="headerlink" title="3. 在controller节点上安装zun服务"></a>3. 在controller节点上安装zun服务</h2><h3 id="3-1-创建用户、组"><a href="#3-1-创建用户、组" class="headerlink" title="3.1 创建用户、组"></a>3.1 创建用户、组</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# groupadd --system zun</span><br><span class="line">[root@controller ~]# useradd --home-dir &quot;&#x2F;var&#x2F;lib&#x2F;zun&quot; --create-home --system</span><br><span class="line">--shell &#x2F;bin&#x2F;false -g zun zun</span><br></pre></td></tr></table></figure>
<h3 id="3-2-创建目录"><a href="#3-2-创建目录" class="headerlink" title="3.2 创建目录"></a>3.2 创建目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# mkdir -p &#x2F;etc&#x2F;zun</span><br><span class="line">[root@controller ~]# chown zun:zun &#x2F;etc&#x2F;zun</span><br></pre></td></tr></table></figure>
<h3 id="3-3-安装zun"><a href="#3-3-安装zun" class="headerlink" title="3.3 安装zun"></a>3.3 安装zun</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br><span class="line">200</span><br><span class="line">201</span><br><span class="line">202</span><br><span class="line">203</span><br><span class="line">204</span><br><span class="line">205</span><br><span class="line">206</span><br><span class="line">207</span><br><span class="line">208</span><br><span class="line">209</span><br><span class="line">210</span><br><span class="line">211</span><br><span class="line">212</span><br><span class="line">213</span><br><span class="line">214</span><br><span class="line">215</span><br><span class="line">216</span><br><span class="line">217</span><br><span class="line">218</span><br><span class="line">219</span><br><span class="line">220</span><br><span class="line">221</span><br><span class="line">222</span><br><span class="line">223</span><br><span class="line">224</span><br><span class="line">225</span><br><span class="line">226</span><br><span class="line">227</span><br><span class="line">228</span><br><span class="line">229</span><br><span class="line">230</span><br><span class="line">231</span><br><span class="line">232</span><br><span class="line">233</span><br><span class="line">234</span><br><span class="line">235</span><br><span class="line">236</span><br><span class="line">237</span><br><span class="line">238</span><br><span class="line">239</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# yum install python-pip -y</span><br><span class="line">[root@controller ~]# cd &#x2F;var&#x2F;lib&#x2F;zun&#x2F;</span><br><span class="line">[root@controller zun]# git clone -b stable&#x2F;queens</span><br><span class="line">https:&#x2F;&#x2F;git.openstack.org&#x2F;openstack&#x2F;zun.git</span><br><span class="line">Cloning into &#39;zun&#39;...</span><br><span class="line">remote: Counting objects: 18434, done.</span><br><span class="line">remote: Compressing objects: 100% (10147&#x2F;10147), done.</span><br><span class="line">remote: Total 18434 (delta 14071), reused 11745 (delta 7946)</span><br><span class="line">Receiving objects: 100% (18434&#x2F;18434), 2.55 MiB | 194.00 KiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (14071&#x2F;14071), done.</span><br><span class="line">[root@controller zun]# chown -R zun:zun zun</span><br><span class="line">[root@controller zun]# cd zun</span><br><span class="line">[root@controller zun]# pip install -r requirements.txt</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): PyYAML&gt;&#x3D;3.10 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 5))</span><br><span class="line">Collecting eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2 (from -r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;e4&#x2F;32&#x2F;88ee8694dd3985d1615287faa47e458d44a6263ffb59cf71ef70b94df6f9&#x2F;eventlet-0.20.0-py2.py3-none-any.whl</span><br><span class="line">(387kB)</span><br><span class="line">100% |████████████████████████████████| 389kB 246kB&#x2F;s</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">keystonemiddleware&gt;&#x3D;4.17.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 7))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">jsonpatch!&#x3D;1.20,&gt;&#x3D;1.16 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pbr!&#x3D;2.1.0,&gt;&#x3D;2.0.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages</span><br><span class="line">(from -r requirements.txt (line 10))</span><br><span class="line">Collecting python-etcd&gt;&#x3D;0.4.3 (from -r requirements.txt (line 11))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;a1&#x2F;da&#x2F;616a4d073642da5dd432e5289b7c1cb0963cc5dde23d1ecb8d726821ab41&#x2F;python-etcd-0.4.5.tar.gz</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-glanceclient&gt;&#x3D;2.8.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 12))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-neutronclient&gt;&#x3D;6.3.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 13))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-novaclient&gt;&#x3D;9.1.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 14))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-cinderclient&gt;&#x3D;3.3.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 15))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.i18n&gt;&#x3D;3.15.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 16))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.log&gt;&#x3D;3.36.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 17))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.concurrency&gt;&#x3D;3.25.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 18))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.config&gt;&#x3D;5.1.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 19))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.messaging&gt;&#x3D;5.29.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 20))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.middleware&gt;&#x3D;3.31.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 21))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.policy&gt;&#x3D;1.30.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 22))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.privsep&gt;&#x3D;1.23.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 23))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.serialization!&#x3D;2.19.1,&gt;&#x3D;2.18.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">-r requirements.txt (line 24))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.versionedobjects&gt;&#x3D;1.31.2 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 26))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.context&gt;&#x3D;2.19.2</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 27))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.utils&gt;&#x3D;3.33.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 28))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.db&gt;&#x3D;4.27.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 29))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): os-vif!&#x3D;1.8.0,&gt;&#x3D;1.7.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 30))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): os-brick&gt;&#x3D;2.2.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): six&gt;&#x3D;1.10.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 32))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): WSME&gt;&#x3D;0.8.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 33))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">SQLAlchemy!&#x3D;1.1.5,!&#x3D;1.1.6,!&#x3D;1.1.7,!&#x3D;1.1.8,&gt;&#x3D;1.0.10 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 34))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): stevedore&gt;&#x3D;1.20.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 35))</span><br><span class="line">Collecting docker&gt;&#x3D;2.4.2 (from -r requirements.txt (line 36))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;f6&#x2F;8e&#x2F;597e81a41598afac5c68180d778bc8513bc763c66158875ddb060371b6f9&#x2F;docker-3.4.0-py2.py3-none-any.whl</span><br><span class="line">(122kB)</span><br><span class="line">100% |████████████████████████████████| 122kB 151kB&#x2F;s</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): netaddr&gt;&#x3D;0.7.18 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 37))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): neutron-lib&gt;&#x3D;1.13.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 38))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): websockify&gt;&#x3D;0.8.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 39))</span><br><span class="line">Collecting websocket-client&lt;&#x3D;0.40.0,&gt;&#x3D;0.33.0 (from -r requirements.txt (line</span><br><span class="line">40))</span><br><span class="line">Retrying (Retry(total&#x3D;4, connect&#x3D;None, read&#x3D;None, redirect&#x3D;None)) after</span><br><span class="line">connection broken by</span><br><span class="line">&#39;NewConnectionError(&#39;&lt;pip._vendor.requests.packages.urllib3.connection.VerifiedHTTPSConnection</span><br><span class="line">object at 0x7f2604899c10&gt;: Failed to establish a new connection: [Errno -3]</span><br><span class="line">Temporary failure in name resolution&#39;,)&#39;: &#x2F;simple&#x2F;websocket-client&#x2F;</span><br><span class="line">Retrying (Retry(total&#x3D;3, connect&#x3D;None, read&#x3D;None, redirect&#x3D;None)) after</span><br><span class="line">connection broken by</span><br><span class="line">&#39;NewConnectionError(&#39;&lt;pip._vendor.requests.packages.urllib3.connection.VerifiedHTTPSConnection</span><br><span class="line">object at 0x7f260411ff10&gt;: Failed to establish a new connection: [Errno -3]</span><br><span class="line">Temporary failure in name resolution&#39;,)&#39;: &#x2F;simple&#x2F;websocket-client&#x2F;</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;a7&#x2F;2b&#x2F;0039154583cb0489c8e18313aa91ccd140ada103289c5c5d31d80fd6d186&#x2F;websocket_client-0.40.0.tar.gz</span><br><span class="line">(196kB)</span><br><span class="line">100% |████████████████████████████████| 204kB 134kB&#x2F;s</span><br><span class="line">Collecting enum-compat (from eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2-&gt;-r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;95&#x2F;6e&#x2F;26bdcba28b66126f66cf3e4cd03bcd63f7ae330d29ee68b1f6b623550bfa&#x2F;enum-compat-0.0.2.tar.gz</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): greenlet&gt;&#x3D;0.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2-&gt;-r requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): jsonpointer&gt;&#x3D;1.9 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from jsonpatch!&#x3D;1.20,&gt;&#x3D;1.16-&gt;-r</span><br><span class="line">requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): WebOb&gt;&#x3D;1.2dev in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Mako&gt;&#x3D;0.4.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): WebTest&gt;&#x3D;1.3.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): logutils&gt;&#x3D;0.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): singledispatch in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): urllib3&gt;&#x3D;1.7.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-etcd&gt;&#x3D;0.4.3-&gt;-r requirements.txt</span><br><span class="line">(line 11))</span><br><span class="line">Collecting dnspython&gt;&#x3D;1.13.0 (from python-etcd&gt;&#x3D;0.4.3-&gt;-r requirements.txt</span><br><span class="line">(line 11))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;a6&#x2F;72&#x2F;209e18bdfedfd78c6994e9ec96981624a5ad7738524dd474237268422cb8&#x2F;dnspython-1.15.0-py2.py3-none-any.whl</span><br><span class="line">(177kB)</span><br><span class="line">100% |████████████████████████████████| 184kB 110kB&#x2F;s</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): monotonic&gt;&#x3D;0.6 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): PasteDeploy&gt;&#x3D;1.5.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Routes&gt;&#x3D;2.3.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Collecting Paste&gt;&#x3D;2.0.2 (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;a4&#x2F;d2&#x2F;ac41e1b414ff1ed70c81e493bf9da42fbeeb53774ed1557b4729242a18ab&#x2F;Paste-2.0.3-py2-none-any.whl</span><br><span class="line">(625kB)</span><br><span class="line">100% |████████████████████████████████| 634kB 144kB&#x2F;s</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Babel!&#x3D;2.4.0,&gt;&#x3D;2.3.4</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt</span><br><span class="line">(line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): requests&gt;&#x3D;2.14.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt</span><br><span class="line">(line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">retrying!&#x3D;1.3.0,&gt;&#x3D;1.2.3 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt (line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): os-win&gt;&#x3D;3.0.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt</span><br><span class="line">(line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): simplegeneric in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from WSME&gt;&#x3D;0.8.0-&gt;-r requirements.txt (line</span><br><span class="line">33))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pytz in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from WSME&gt;&#x3D;0.8.0-&gt;-r requirements.txt (line</span><br><span class="line">33))</span><br><span class="line">Collecting docker-pycreds&gt;&#x3D;0.3.0 (from docker&gt;&#x3D;2.4.2-&gt;-r requirements.txt</span><br><span class="line">(line 36))</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;ea&#x2F;bf&#x2F;7e70aeebc40407fbdb96fa9f79fc8e4722ea889a99378303e3bcc73f4ab5&#x2F;docker_pycreds-0.3.0-py2.py3-none-any.whl</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">backports.ssl-match-hostname&gt;&#x3D;3.5; python_version &lt; &quot;3.5&quot; in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from docker&gt;&#x3D;2.4.2-&gt;-r requirements.txt</span><br><span class="line">(line 36))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): ipaddress&gt;&#x3D;1.0.16;</span><br><span class="line">python_version &lt; &quot;3.3&quot; in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">docker&gt;&#x3D;2.4.2-&gt;-r requirements.txt (line 36))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): enum34 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">enum-compat-&gt;eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2-&gt;-r requirements.txt</span><br><span class="line">(line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): MarkupSafe&gt;&#x3D;0.9.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">Mako&gt;&#x3D;0.4.0-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt</span><br><span class="line">(line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): waitress&gt;&#x3D;0.8.5 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">WebTest&gt;&#x3D;1.3.1-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r</span><br><span class="line">requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">WebTest&gt;&#x3D;1.3.1-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r</span><br><span class="line">requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): repoze.lru&gt;&#x3D;0.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">Routes&gt;&#x3D;2.3.1-&gt;oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): setuptools in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">waitress&gt;&#x3D;0.8.5-&gt;WebTest&gt;&#x3D;1.3.1-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r</span><br><span class="line">requirements.txt (line 10))</span><br><span class="line">Installing collected packages: enum-compat, eventlet, dnspython, python-etcd,</span><br><span class="line">websocket-client, docker-pycreds, docker, Paste</span><br><span class="line">Running setup.py install for enum-compat ... done</span><br><span class="line">Found existing installation: eventlet 0.20.1</span><br><span class="line">Uninstalling eventlet-0.20.1:</span><br><span class="line">Successfully uninstalled eventlet-0.20.1</span><br><span class="line">Running setup.py install for python-etcd ... done</span><br><span class="line">Running setup.py install for websocket-client ... done</span><br><span class="line">Found existing installation: Paste 1.7.5.1</span><br><span class="line">Uninstalling Paste-1.7.5.1:</span><br><span class="line">Successfully uninstalled Paste-1.7.5.1</span><br><span class="line">Successfully installed Paste-2.0.3 dnspython-1.15.0 docker-3.4.0</span><br><span class="line">docker-pycreds-0.3.0 enum-compat-0.0.2 eventlet-0.20.0 python-etcd-0.4.5</span><br><span class="line">websocket-client-0.40.0</span><br><span class="line">You are using pip version 8.1.2, however version 10.0.1 is available.</span><br><span class="line">You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.</span><br><span class="line">[root@controller zun]# python setup.py install</span><br></pre></td></tr></table></figure>
<h3 id="3-4-生成示例配置文件"><a href="#3-4-生成示例配置文件" class="headerlink" title="3.4 生成示例配置文件"></a>3.4 生成示例配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@controller zun]# su -s &#x2F;bin&#x2F;sh -c &quot;oslo-config-generator --config-file</span><br><span class="line">etc&#x2F;zun&#x2F;zun-config-generator.conf&quot; zun</span><br><span class="line">[root@controller zun]# su -s &#x2F;bin&#x2F;sh -c &quot;cp etc&#x2F;zun&#x2F;zun.conf.sample</span><br><span class="line">&#x2F;etc&#x2F;zun&#x2F;zun.conf&quot; zun</span><br></pre></td></tr></table></figure>
<h3 id="3-5-复制api-paste-ini配置文件"><a href="#3-5-复制api-paste-ini配置文件" class="headerlink" title="3.5 复制api-paste.ini配置文件"></a>3.5 复制api-paste.ini配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller zun]# su -s &#x2F;bin&#x2F;sh -c &quot;cp etc&#x2F;zun&#x2F;api-paste.ini &#x2F;etc&#x2F;zun&quot;</span><br><span class="line">zun</span><br></pre></td></tr></table></figure>
<h3 id="3-6-编辑配置文件-在合适位置添加以下内容"><a href="#3-6-编辑配置文件-在合适位置添加以下内容" class="headerlink" title="3.6 编辑配置文件,在合适位置添加以下内容"></a>3.6 编辑配置文件,在合适位置添加以下内容</h3><h1 id="vi-etc-zun-zun-conf"><a href="#vi-etc-zun-zun-conf" class="headerlink" title="vi /etc/zun/zun.conf"></a>vi <strong>/etc/zun/zun.conf</strong></h1><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br></pre></td><td class="code"><pre><span class="line">[DEFAULT]</span><br><span class="line">transport_url &#x3D; rabbit:&#x2F;&#x2F;openstack:000000@controller</span><br><span class="line">[api]</span><br><span class="line">host_ip &#x3D; 172.24.19.10</span><br><span class="line">port &#x3D; 9517</span><br><span class="line">[database]</span><br><span class="line">connection &#x3D; mysql+pymysql:&#x2F;&#x2F;zun:000000@controller&#x2F;zun</span><br><span class="line">[keystone_auth]</span><br><span class="line">memcached_servers &#x3D; controller:11211</span><br><span class="line">www_authenticate_uri &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">project_domain_name &#x3D; default</span><br><span class="line">project_name &#x3D; service</span><br><span class="line">user_domain_name &#x3D; default</span><br><span class="line">password &#x3D; 000000</span><br><span class="line">username &#x3D; zun</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">auth_type &#x3D; password</span><br><span class="line">auth_version &#x3D; v3</span><br><span class="line">auth_protocol &#x3D; http</span><br><span class="line">service_token_roles_required &#x3D; True</span><br><span class="line">endpoint_type &#x3D; internalURL</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">memcached_servers &#x3D; controller:11211</span><br><span class="line">www_authenticate_uri &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">project_domain_name &#x3D; default</span><br><span class="line">project_name &#x3D; service</span><br><span class="line">user_domain_name &#x3D; default</span><br><span class="line">password &#x3D; 000000</span><br><span class="line">username &#x3D; zun</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">auth_type &#x3D; password</span><br><span class="line">auth_version &#x3D; v3</span><br><span class="line">auth_protocol &#x3D; http</span><br><span class="line">service_token_roles_required &#x3D; True</span><br><span class="line">endpoint_type &#x3D; internalURL</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path &#x3D; &#x2F;var&#x2F;lib&#x2F;zun&#x2F;tmp</span><br><span class="line">[oslo_messaging_notifications]</span><br><span class="line">driver &#x3D; messaging</span><br><span class="line">[websocket_proxy]</span><br><span class="line">wsproxy_host &#x3D; 172.24.19.10</span><br><span class="line">wsproxy_port &#x3D; 6784</span><br></pre></td></tr></table></figure>
<h3 id="3-7-填充数据库"><a href="#3-7-填充数据库" class="headerlink" title="3.7 填充数据库"></a>3.7 填充数据库</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br></pre></td><td class="code"><pre><span class="line">[root@controller zun]# su -s &#x2F;bin&#x2F;sh -c &quot;zun-db-manage upgrade&quot; zun</span><br><span class="line">INFO [alembic.runtime.migration] Context impl MySQLImpl.</span><br><span class="line">INFO [alembic.runtime.migration] Will assume non-transactional DDL.</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade -&gt; a9a92eebd9a8,</span><br><span class="line">create_table_zun_service</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade a9a92eebd9a8 -&gt; 9fe371393a24,</span><br><span class="line">create_table_container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 9fe371393a24 -&gt; 5971a6844738,</span><br><span class="line">add container_id column to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 5971a6844738 -&gt; 93fbb05b77b9,</span><br><span class="line">add memory field to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 93fbb05b77b9 -&gt; 63a08e32cc43,</span><br><span class="line">add task state to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 63a08e32cc43 -&gt; 1192ba19a6e9,</span><br><span class="line">Add cpu workdir ports hostname labels to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 1192ba19a6e9 -&gt; 72c6947c6636,</span><br><span class="line">create_table_image</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 72c6947c6636 -&gt; c5565cbaa3de,</span><br><span class="line">Insert status_reason to Container table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade c5565cbaa3de -&gt; 43e1088c3389,</span><br><span class="line">add image_pull_policy column</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 43e1088c3389 -&gt; 4a0c4f7a4a33,</span><br><span class="line">add meta addresses to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 4a0c4f7a4a33 -&gt; 531e4a890480,</span><br><span class="line">add host to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 531e4a890480 -&gt; bbcfa910a8a5,</span><br><span class="line">add_restart_policy_column</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade bbcfa910a8a5 -&gt; ad43a2179cf2,</span><br><span class="line">add_status_detail</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade ad43a2179cf2 -&gt; d1ef05fd92c8,</span><br><span class="line">add tty stdin_open</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade d1ef05fd92c8 -&gt; 5458f8394206,</span><br><span class="line">add image driver field</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 5458f8394206 -&gt; 6fd4f7582eb0,</span><br><span class="line">Add resource provider table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 6fd4f7582eb0 -&gt; 7975b7f0f792,</span><br><span class="line">Add resource class table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 7975b7f0f792 -&gt; 09f196622a3f,</span><br><span class="line">create inventory table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 09f196622a3f -&gt; e4d145e195f4,</span><br><span class="line">Create allocation table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade e4d145e195f4 -&gt; 8192905fd835,</span><br><span class="line">add uuid_to_resource_class</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 8192905fd835 -&gt; eeac0d191f5a,</span><br><span class="line">add compute node table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade eeac0d191f5a -&gt; 53a8b515057e,</span><br><span class="line">Add memory info to compute node</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 53a8b515057e -&gt; 4bf34495d060,</span><br><span class="line">Add container number info to compute node</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 4bf34495d060 -&gt; ce9944b346cb,</span><br><span class="line">combine tty and stdin_open</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade ce9944b346cb -&gt; 8c3d80e18eb5,</span><br><span class="line">Add container cpus,cpu_used to compute node</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 8c3d80e18eb5 -&gt; 04ba87af76bb,</span><br><span class="line">Add container host operating system info</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 04ba87af76bb -&gt; 17ab8b533cc8,</span><br><span class="line">Add container hosts label info</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 17ab8b533cc8 -&gt; 5359d23b2322,</span><br><span class="line">add websocket_url and websocket_token</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 5359d23b2322 -&gt; 174cafda0857,</span><br><span class="line">add security groups</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 174cafda0857 -&gt; 648c25faa0be,</span><br><span class="line">add mem used to compute node</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 648c25faa0be -&gt; 75315e219cfb,</span><br><span class="line">Add auto_remove to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 75315e219cfb -&gt; a251f1f61217,</span><br><span class="line">create capsule table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade a251f1f61217 -&gt; 945569b3669f,</span><br><span class="line">add runtime column</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 945569b3669f -&gt; 10d65e285a59,</span><br><span class="line">create volume_mapping table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 10d65e285a59 -&gt; 37bce72463e3,</span><br><span class="line">add pci device</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 37bce72463e3 -&gt; bcd6410d645e,</span><br><span class="line">add host to capsule</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade bcd6410d645e -&gt; fc27c7415d9c,</span><br><span class="line">change the properties of meta_labels</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade fc27c7415d9c -&gt; ff7b9665d504,</span><br><span class="line">add pci stats to compute node</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade ff7b9665d504 -&gt; f046346d1d87,</span><br><span class="line">add timestamp to pci device</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade f046346d1d87 -&gt; d2affd5b4172</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade d2affd5b4172 -&gt; cf46a28f46bc,</span><br><span class="line">add container_actions table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade cf46a28f46bc -&gt; b6bfca998431,</span><br><span class="line">add container_actions_events table</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade b6bfca998431 -&gt; 8b0082d9e7c1,</span><br><span class="line">drop foreign key of container_actions container_uuid</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 8b0082d9e7c1 -&gt; 10c9668a816d,</span><br><span class="line">add volumes info and addresses to capsule</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 10c9668a816d -&gt; 71f8b4cf1dbf,</span><br><span class="line">upgrade</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 71f8b4cf1dbf -&gt; d9714eadbdc2,</span><br><span class="line">add disk to container</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade d9714eadbdc2 -&gt; 6ff4d35f4334,</span><br><span class="line">change properties of restart policy in capsule</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade 6ff4d35f4334 -&gt; fb9ad4a050f8,</span><br><span class="line">drop_container_actions_foreign_key</span><br><span class="line">INFO [alembic.runtime.migration] Running upgrade fb9ad4a050f8 -&gt; 50829990c965,</span><br><span class="line">add ondelete to container_actions_events foreign key</span><br></pre></td></tr></table></figure>
<h3 id="3-8-创建启动文件"><a href="#3-8-创建启动文件" class="headerlink" title="3.8 创建启动文件"></a>3.8 创建启动文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-api.service</span><br><span class="line">[Unit]</span><br><span class="line">Description &#x3D; OpenStack Container Service API</span><br><span class="line">[Service]</span><br><span class="line">ExecStart &#x3D; &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">User &#x3D; zun</span><br><span class="line">[Install]</span><br><span class="line">WantedBy &#x3D; multi-user.target</span><br><span class="line"># vi **&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-wsproxy.service**</span><br><span class="line">[Unit]</span><br><span class="line">Description &#x3D; OpenStack Container Service Websocket Proxy</span><br><span class="line">[Service]</span><br><span class="line">ExecStart &#x3D; &#x2F;usr&#x2F;bin&#x2F;zun-wsproxy</span><br><span class="line">User &#x3D; zun</span><br><span class="line">[Install]</span><br><span class="line">WantedBy &#x3D; multi-user.target</span><br></pre></td></tr></table></figure>
<h3 id="3-9-启动服务"><a href="#3-9-启动服务" class="headerlink" title="3.9 启动服务"></a>3.9 启动服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line">[root@controller zun]# systemctl start zun-api zun-wsproxy</span><br><span class="line">[root@controller zun]# systemctl enable zun-api zun-wsproxy</span><br><span class="line">Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;zun-api.service</span><br><span class="line">to &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-api.service.</span><br><span class="line">Created symlink from</span><br><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;zun-wsproxy.service to</span><br><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-wsproxy.service.</span><br><span class="line">[root@controller zun]# systemctl status zun-api zun-wsproxy</span><br><span class="line">● zun-api.service - OpenStack Container Service API</span><br><span class="line">Loaded: loaded (&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-api.service; enabled; vendor preset:</span><br><span class="line">disabled)</span><br><span class="line">Active: active (running) since Wed 2018-06-20 07:28:15 EDT; 10s ago</span><br><span class="line">Main PID: 4126 (zun-api)</span><br><span class="line">CGroup: &#x2F;system.slice&#x2F;zun-api.service</span><br><span class="line">├─4126 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4148 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4149 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4150 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4151 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4152 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4153 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4154 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4155 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4156 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4157 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4158 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4159 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4160 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4161 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">├─4162 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">└─4163 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-api</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.336 4154 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4154) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.338 4155 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4155) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.339 4156 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4156) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.340 4157 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4157) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.342 4158 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4158) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.344 4159 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4159) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.345 4160 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4160) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.347 4161 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4161) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.348 4162 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4162) wsgi starting up on http....10:9517</span><br><span class="line">Jun 20 07:28:18 controller zun-api[4126]: 2018-06-20 07:28:18.349 4163 INFO</span><br><span class="line">eventlet.wsgi.server [-] (4163) wsgi starting up on http....10:9517</span><br><span class="line">● zun-wsproxy.service - OpenStack Container Service Websocket Proxy</span><br><span class="line">Loaded: loaded (&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-wsproxy.service; enabled; vendor preset:</span><br><span class="line">disabled)</span><br><span class="line">Active: active (running) since Wed 2018-06-20 07:28:15 EDT; 10s ago</span><br><span class="line">Main PID: 4127 (zun-wsproxy)</span><br><span class="line">CGroup: &#x2F;system.slice&#x2F;zun-wsproxy.service</span><br><span class="line">└─4127 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-wsproxy</span><br><span class="line">Jun 20 07:28:15 controller systemd[1]: Started OpenStack Container Service</span><br><span class="line">Websocket Proxy.</span><br><span class="line">Jun 20 07:28:15 controller systemd[1]: Starting OpenStack Container Service</span><br><span class="line">Websocket Proxy...</span><br><span class="line">Jun 20 07:28:18 controller zun-wsproxy[4127]: 2018-06-20 07:28:18.298 4127 INFO</span><br><span class="line">zun.cmd.wsproxy [-] start websocket proxy</span><br><span class="line">Jun 20 07:28:18 controller zun-wsproxy[4127]: 2018-06-20 07:28:18.299 4127 INFO</span><br><span class="line">zun.websocket.websocketproxy [-] WebSocket server settings:</span><br><span class="line">Jun 20 07:28:18 controller zun-wsproxy[4127]: 2018-06-20 07:28:18.299 4127 INFO</span><br><span class="line">zun.websocket.websocketproxy [-] - Listen on 172.24...10:6784</span><br><span class="line">Jun 20 07:28:18 controller zun-wsproxy[4127]: 2018-06-20 07:28:18.299 4127 INFO</span><br><span class="line">zun.websocket.websocketproxy [-] - Flash security p... server</span><br><span class="line">Jun 20 07:28:18 controller zun-wsproxy[4127]: 2018-06-20 07:28:18.299 4127 INFO</span><br><span class="line">zun.websocket.websocketproxy [-] - SSL&#x2F;TLS support</span><br><span class="line">Jun 20 07:28:18 controller zun-wsproxy[4127]: 2018-06-20 07:28:18.300 4127 INFO</span><br><span class="line">zun.websocket.websocketproxy [-] - proxying from 17...ne:None</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full..</span><br></pre></td></tr></table></figure>
<p><strong>以下操作在compute节点上执行</strong></p>
<h2 id="4-在compute节点上安装docker-ce"><a href="#4-在compute节点上安装docker-ce" class="headerlink" title="4 在compute节点上安装docker-ce"></a>4 在compute节点上安装docker-ce</h2><h3 id="4-1-卸载旧版本的docker"><a href="#4-1-卸载旧版本的docker" class="headerlink" title="4.1 卸载旧版本的docker"></a>4.1 卸载旧版本的docker</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum remove docker docker-common docker-selinux docker-engine -y </span><br></pre></td></tr></table></figure>
<h3 id="4-2-安装依赖包"><a href="#4-2-安装依赖包" class="headerlink" title="4.2 安装依赖包"></a>4.2 安装依赖包</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum install -y yum-utils device-mapper-persistent-data lvm2</span><br></pre></td></tr></table></figure>
<h3 id="4-3-添加yum阿里源"><a href="#4-3-添加yum阿里源" class="headerlink" title="4.3 添加yum阿里源"></a>4.3 添加yum阿里源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum-config-manager --add-repo https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">adding repo from: https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo</span><br><span class="line">grabbing file https:&#x2F;&#x2F;mirrors.aliyun.com&#x2F;docker-ce&#x2F;linux&#x2F;centos&#x2F;docker-ce.repo to &#x2F;etc&#x2F;yum.repos.d&#x2F;docker-ce.repo</span><br><span class="line">repo saved to &#x2F;etc&#x2F;yum.repos.d&#x2F;docker-ce.repo </span><br></pre></td></tr></table></figure>
<h3 id="4-4-更新yum源"><a href="#4-4-更新yum源" class="headerlink" title="4.4 更新yum源"></a>4.4 更新yum源</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum makecache fast</span><br><span class="line">Loaded plugins: fastestmirror</span><br><span class="line">Loading mirror speeds from cached hostfile</span><br><span class="line">* base: mirrors.cn99.com</span><br><span class="line">* extras: mirrors.cn99.com</span><br><span class="line">* updates: mirrors.cn99.com</span><br><span class="line">base | 3.6 kB 00:00:00</span><br><span class="line">centos-ceph-luminous | 2.9 kB 00:00:00</span><br><span class="line">centos-openstack-queens | 2.9 kB 00:00:00</span><br><span class="line">centos-qemu-ev | 2.9 kB 00:00:00</span><br><span class="line">docker-ce-stable | 2.9 kB 00:00:00</span><br><span class="line">extras | 3.4 kB 00:00:00</span><br><span class="line">updates | 3.4 kB 00:00:00</span><br><span class="line">docker-ce-stable&#x2F;x86_64&#x2F;primary_db | 13 kB 00:00:00</span><br><span class="line">Metadata Cache Created</span><br></pre></td></tr></table></figure>
<h3 id="4-5-安装docker-ce"><a href="#4-5-安装docker-ce" class="headerlink" title="4.5 安装docker-ce"></a>4.5 安装docker-ce</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum install docker-ce -y </span><br></pre></td></tr></table></figure>
<h3 id="4-6-启动docker-ce"><a href="#4-6-启动docker-ce" class="headerlink" title="4.6 启动docker-ce"></a>4.6 启动docker-ce</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# systemctl start docker</span><br><span class="line">sys[root@compute ~]# systemctl enable docker</span><br><span class="line">Created symlink from &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;docker.service</span><br><span class="line">to &#x2F;usr&#x2F;lib&#x2F;systemd&#x2F;system&#x2F;docker.service.</span><br></pre></td></tr></table></figure>
<h3 id="4-7-添加内核配置参数"><a href="#4-7-添加内核配置参数" class="headerlink" title="4.7 添加内核配置参数"></a>4.7 添加内核配置参数</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># cat &#x2F;etc&#x2F;sysctl.conf</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables &#x3D; 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables &#x3D; 1</span><br><span class="line">net.ipv4.ip_forward &#x3D; 1</span><br><span class="line">[root@compute ~]# sysctl -p</span><br><span class="line">net.bridge.bridge-nf-call-ip6tables &#x3D; 1</span><br><span class="line">net.bridge.bridge-nf-call-iptables &#x3D; 1</span><br><span class="line">net.ipv4.ip_forward &#x3D; 1</span><br></pre></td></tr></table></figure>
<h2 id="5-在controller节点上添加kuryr-libnetwork用户"><a href="#5-在controller节点上添加kuryr-libnetwork用户" class="headerlink" title="5 在controller节点上添加kuryr-libnetwork用户"></a>5 在controller节点上添加kuryr-libnetwork用户</h2><h3 id="5-1-创建kuryr用户"><a href="#5-1-创建kuryr用户" class="headerlink" title="5.1 创建kuryr用户"></a>5.1 创建kuryr用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# source admin-openrc</span><br><span class="line">[root@controller ~]# openstack user create --domain default --password-prompt</span><br><span class="line">kuryr</span><br><span class="line">User Password:</span><br><span class="line">Repeat User Password:</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+---------------------+----------------------------------+</span><br><span class="line">| domain_id | default |</span><br><span class="line">| enabled | True |</span><br><span class="line">| id | 41dc08dfaec64b8c808fc4dcb4d29bfe |</span><br><span class="line">| name | kuryr |</span><br><span class="line">| options | &#123;&#125; |</span><br><span class="line">| password_expires_at | None |</span><br><span class="line">+---------------------+----------------------------------+</span><br></pre></td></tr></table></figure>
<h3 id="5-2-添加角色"><a href="#5-2-添加角色" class="headerlink" title="5.2 添加角色"></a>5.2 添加角色</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack role add --project service --user kuryr admin</span><br></pre></td></tr></table></figure>
<h2 id="6-在compute节点安装kuryr-libnetwork"><a href="#6-在compute节点安装kuryr-libnetwork" class="headerlink" title="6 在compute节点安装kuryr-libnetwork"></a>6 在compute节点安装kuryr-libnetwork</h2><h3 id="6-1-创建用户"><a href="#6-1-创建用户" class="headerlink" title="6.1 创建用户"></a>6.1 创建用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# groupadd --system kuryr</span><br><span class="line">[root@compute ~]# useradd --home-dir &quot;&#x2F;var&#x2F;lib&#x2F;kuryr&quot; --create-home --system</span><br><span class="line">--shell &#x2F;bin&#x2F;false -g kuryr kuryr</span><br></pre></td></tr></table></figure>
<h3 id="6-2-创建目录"><a href="#6-2-创建目录" class="headerlink" title="6.2 创建目录"></a>6.2 创建目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# mkdir -p &#x2F;etc&#x2F;kuryr</span><br><span class="line">[root@compute ~]# chown kuryr:kuryr &#x2F;etc&#x2F;kuryr</span><br></pre></td></tr></table></figure>
<h3 id="6-3-安装kuryr-libnetwork"><a href="#6-3-安装kuryr-libnetwork" class="headerlink" title="6.3 安装kuryr-libnetwork"></a>6.3 安装kuryr-libnetwork</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br></pre></td><td class="code"><pre><span class="line">[root@compute ~]# yum install -y python-pip</span><br><span class="line">[root@compute ~]# cd &#x2F;var&#x2F;lib&#x2F;kuryr</span><br><span class="line">[root@compute ~]# cd &#x2F;var&#x2F;lib&#x2F;kuryr</span><br><span class="line">[root@compute kuryr]# git clone -b stable&#x2F;queens</span><br><span class="line">https:&#x2F;&#x2F;git.openstack.org&#x2F;openstack&#x2F;kuryr-libnetwork.git</span><br><span class="line">Cloning into &#39;kuryr-libnetwork&#39;...</span><br><span class="line">error: RPC failed; result&#x3D;6, HTTP code &#x3D; 0</span><br><span class="line">fatal: The remote end hung up unexpectedly</span><br><span class="line">[root@compute kuryr]# git clone -b stable&#x2F;queens</span><br><span class="line">https:&#x2F;&#x2F;git.openstack.org&#x2F;openstack&#x2F;kuryr-libnetwork.git</span><br><span class="line">Cloning into &#39;kuryr-libnetwork&#39;...</span><br><span class="line">remote: Counting objects: 4730, done.</span><br><span class="line">remote: Compressing objects: 100% (2175&#x2F;2175), done.</span><br><span class="line">remote: Total 4730 (delta 3263), reused 3817 (delta 2463)</span><br><span class="line">Receiving objects: 100% (4730&#x2F;4730), 1.65 MiB | 101.00 KiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (3263&#x2F;3263), done.</span><br><span class="line">[root@compute kuryr]# chown -R kuryr:kuryr kuryr-libnetwork</span><br><span class="line">[root@compute kuryr]# cd kuryr-libnetwork</span><br><span class="line">[root@compute kuryr-libnetwork]# pip install -r requirements.txt</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Babel!&#x3D;2.4.0,&gt;&#x3D;2.3.4</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 5))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">Flask!&#x3D;0.11,&lt;1.0,&gt;&#x3D;0.10 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): ipaddress&gt;&#x3D;1.0.16 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 7))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">jsonschema&lt;3.0.0,&gt;&#x3D;2.6.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): kuryr-lib&gt;&#x3D;0.5.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): neutron-lib&gt;&#x3D;1.11.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">os-client-config&gt;&#x3D;1.28.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 11))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.concurrency&gt;&#x3D;3.20.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 12))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.config&gt;&#x3D;4.6.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 13))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.log&gt;&#x3D;3.30.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 14))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.utils&gt;&#x3D;3.31.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 15))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pbr!&#x3D;2.1.0,&gt;&#x3D;2.0.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 16))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-neutronclient&gt;&#x3D;6.3.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 17))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): six&gt;&#x3D;1.10.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 18))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pytz in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from Babel!&#x3D;2.4.0,&gt;&#x3D;2.3.4-&gt;-r</span><br><span class="line">requirements.txt (line 5))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): itsdangerous&gt;&#x3D;0.21 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from Flask!&#x3D;0.11,&lt;1.0,&gt;&#x3D;0.10-&gt;-r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): click&gt;&#x3D;2.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from Flask!&#x3D;0.11,&lt;1.0,&gt;&#x3D;0.10-&gt;-r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Jinja2&gt;&#x3D;2.4 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from Flask!&#x3D;0.11,&lt;1.0,&gt;&#x3D;0.10-&gt;-r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Werkzeug&gt;&#x3D;0.7 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from Flask!&#x3D;0.11,&lt;1.0,&gt;&#x3D;0.10-&gt;-r</span><br><span class="line">requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): repoze.lru in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from jsonschema&lt;3.0.0,&gt;&#x3D;2.6.0-&gt;-r</span><br><span class="line">requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): keystoneauth1&gt;&#x3D;3.4.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from kuryr-lib&gt;&#x3D;0.5.0-&gt;-r</span><br><span class="line">requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.i18n&gt;&#x3D;3.15.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from kuryr-lib&gt;&#x3D;0.5.0-&gt;-r requirements.txt</span><br><span class="line">(line 9))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pyroute2&gt;&#x3D;0.4.21;</span><br><span class="line">sys_platform !&#x3D; &quot;win32&quot; in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">kuryr-lib&gt;&#x3D;0.5.0-&gt;-r requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): MarkupSafe&gt;&#x3D;0.23 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">Jinja2&gt;&#x3D;2.4-&gt;Flask!&#x3D;0.11,&lt;1.0,&gt;&#x3D;0.10-&gt;-r requirements.txt (line 6))</span><br><span class="line">You are using pip version 8.1.2, however version 10.0.1 is available.</span><br><span class="line">You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.</span><br><span class="line">[root@compute kuryr-libnetwork]# python setup.py install</span><br></pre></td></tr></table></figure>
<h3 id="6-4-生成示例配置文件"><a href="#6-4-生成示例配置文件" class="headerlink" title="6.4 生成示例配置文件"></a>6.4 生成示例配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# su -s &#x2F;bin&#x2F;sh -c</span><br><span class="line">&quot;.&#x2F;tools&#x2F;generate_config_file_samples.sh&quot; kuryr</span><br><span class="line">[root@compute kuryr-libnetwork]# su -s &#x2F;bin&#x2F;sh -c &quot;cp etc&#x2F;kuryr.conf.sample</span><br><span class="line">&#x2F;etc&#x2F;kuryr&#x2F;kuryr.conf&quot; kuryr</span><br></pre></td></tr></table></figure>
<h3 id="6-5-编辑配置文件，添加以下内容"><a href="#6-5-编辑配置文件，添加以下内容" class="headerlink" title="6.5 编辑配置文件，添加以下内容"></a>6.5 编辑配置文件，添加以下内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;kuryr&#x2F;kuryr.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">bindir &#x3D; &#x2F;usr&#x2F;libexec&#x2F;kuryr</span><br><span class="line">[neutron]</span><br><span class="line">www_authenticate_uri &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;controller:35357</span><br><span class="line">username &#x3D; kuryr</span><br><span class="line">user_domain_name &#x3D; default</span><br><span class="line">password &#x3D; 000000</span><br><span class="line">project_name &#x3D; service</span><br><span class="line">project_domain_name &#x3D; default</span><br><span class="line">auth_type &#x3D; password</span><br></pre></td></tr></table></figure>
<h3 id="6-6-创建启动文件"><a href="#6-6-创建启动文件" class="headerlink" title="6.6 创建启动文件"></a>6.6 创建启动文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kuryr-libnetwork.service</span><br><span class="line">[Unit]</span><br><span class="line">Description &#x3D; Kuryr-libnetwork - Docker network plugin for Neutron</span><br><span class="line">[Service]</span><br><span class="line">ExecStart &#x3D; &#x2F;usr&#x2F;bin&#x2F;kuryr-server --config-file &#x2F;etc&#x2F;kuryr&#x2F;kuryr.conf</span><br><span class="line">CapabilityBoundingSet &#x3D; CAP_NET_ADMIN</span><br><span class="line">[Install]</span><br><span class="line">WantedBy &#x3D; multi-user.target</span><br></pre></td></tr></table></figure>
<h3 id="6-7-启动服务"><a href="#6-7-启动服务" class="headerlink" title="6.7 启动服务"></a>6.7 启动服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# systemctl enable kuryr-libnetwork</span><br><span class="line">Created symlink from</span><br><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;kuryr-libnetwork.service to</span><br><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;kuryr-libnetwork.service.</span><br><span class="line">[root@compute kuryr-libnetwork]# systemctl start kuryr-libnetwork</span><br><span class="line">[root@compute kuryr-libnetwork]# systemctl restart docker</span><br></pre></td></tr></table></figure>
<h3 id="6-8-验证"><a href="#6-8-验证" class="headerlink" title="6.8 验证"></a>6.8 验证</h3><h4 id="6-8-1-创建kuryr网络"><a href="#6-8-1-创建kuryr网络" class="headerlink" title="6.8.1 创建kuryr网络"></a>6.8.1 创建kuryr网络</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# docker network create --driver kuryr</span><br><span class="line">--ipam-driver kuryr --subnet 10.10.0.0&#x2F;16 --gateway&#x3D;10.10.0.1 test_net</span><br><span class="line">9ab4903d7e7056070da97a667cbb7b2c0801ee25bb9f38fafab6798f087c2dae</span><br></pre></td></tr></table></figure>
<h4 id="6-8-2-查看网络"><a href="#6-8-2-查看网络" class="headerlink" title="6.8.2 查看网络"></a>6.8.2 查看网络</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# docker network ls</span><br><span class="line">NETWORK ID NAME DRIVER SCOPE</span><br><span class="line">3eadaa82b6d7 bridge bridge local</span><br><span class="line">8c9b9f0285cc host host local</span><br><span class="line">e340dd89e780 none null local</span><br><span class="line">9ab4903d7e70 test_net kuryr local</span><br></pre></td></tr></table></figure>
<h4 id="6-8-3-创建容器"><a href="#6-8-3-创建容器" class="headerlink" title="6.8.3 创建容器"></a>6.8.3 创建容器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# docker run --net test_net cirros ifconfig</span><br><span class="line">Unable to find image &#39;cirros:latest&#39; locally</span><br><span class="line">latest: Pulling from library&#x2F;cirros</span><br><span class="line">480d57c7bf4d: Pull complete</span><br><span class="line">0f45bfe9a805: Pull complete</span><br><span class="line">5aa6c26e64dc: Pull complete</span><br><span class="line">Digest: sha256:e67f6f4a0521e326ba2dd697950046aba5ce836edda79cb818d45a56841c7ca2</span><br><span class="line">Status: Downloaded newer image for cirros:latest</span><br><span class="line">eth0 Link encap:Ethernet HWaddr 02:42:9D:F5:4C:8A</span><br><span class="line">inet addr:10.10.0.10 Bcast:10.10.255.255 Mask:255.255.0.0</span><br><span class="line">UP BROADCAST RUNNING MULTICAST MTU:1450 Metric:1</span><br><span class="line">RX packets:16 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">TX packets:8 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">collisions:0 txqueuelen:1000</span><br><span class="line">RX bytes:1296 (1.2 KiB) TX bytes:648 (648.0 B)</span><br><span class="line">lo Link encap:Local Loopback</span><br><span class="line">inet addr:127.0.0.1 Mask:255.0.0.0</span><br><span class="line">UP LOOPBACK RUNNING MTU:65536 Metric:1</span><br><span class="line">RX packets:0 errors:0 dropped:0 overruns:0 frame:0</span><br><span class="line">TX packets:0 errors:0 dropped:0 overruns:0 carrier:0</span><br><span class="line">collisions:0 txqueuelen:1000</span><br><span class="line">RX bytes:0 (0.0 B) TX bytes:0 (0.0 B)</span><br></pre></td></tr></table></figure>
<h2 id="7-在compute节点安装zun服务"><a href="#7-在compute节点安装zun服务" class="headerlink" title="7 在compute节点安装zun服务"></a>7 在compute节点安装zun服务</h2><h3 id="7-1-创建用户"><a href="#7-1-创建用户" class="headerlink" title="7.1 创建用户"></a>7.1 创建用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# groupadd --system zun</span><br><span class="line">[root@compute kuryr-libnetwork]# useradd --home-dir &quot;&#x2F;var&#x2F;lib&#x2F;zun&quot;</span><br><span class="line">--create-home --system --shell &#x2F;bin&#x2F;false -g zun zun</span><br></pre></td></tr></table></figure>
<h3 id="7-2-创建目录"><a href="#7-2-创建目录" class="headerlink" title="7.2 创建目录"></a>7.2 创建目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# mkdir -p &#x2F;etc&#x2F;zun</span><br><span class="line">[root@compute kuryr-libnetwork]# chown zun:zun &#x2F;etc&#x2F;zun</span><br></pre></td></tr></table></figure>
<h3 id="7-3-安装zun"><a href="#7-3-安装zun" class="headerlink" title="7.3 安装zun"></a>7.3 安装zun</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br><span class="line">128</span><br><span class="line">129</span><br><span class="line">130</span><br><span class="line">131</span><br><span class="line">132</span><br><span class="line">133</span><br><span class="line">134</span><br><span class="line">135</span><br><span class="line">136</span><br><span class="line">137</span><br><span class="line">138</span><br><span class="line">139</span><br><span class="line">140</span><br><span class="line">141</span><br><span class="line">142</span><br><span class="line">143</span><br><span class="line">144</span><br><span class="line">145</span><br><span class="line">146</span><br><span class="line">147</span><br><span class="line">148</span><br><span class="line">149</span><br><span class="line">150</span><br><span class="line">151</span><br><span class="line">152</span><br><span class="line">153</span><br><span class="line">154</span><br><span class="line">155</span><br><span class="line">156</span><br><span class="line">157</span><br><span class="line">158</span><br><span class="line">159</span><br><span class="line">160</span><br><span class="line">161</span><br><span class="line">162</span><br><span class="line">163</span><br><span class="line">164</span><br><span class="line">165</span><br><span class="line">166</span><br><span class="line">167</span><br><span class="line">168</span><br><span class="line">169</span><br><span class="line">170</span><br><span class="line">171</span><br><span class="line">172</span><br><span class="line">173</span><br><span class="line">174</span><br><span class="line">175</span><br><span class="line">176</span><br><span class="line">177</span><br><span class="line">178</span><br><span class="line">179</span><br><span class="line">180</span><br><span class="line">181</span><br><span class="line">182</span><br><span class="line">183</span><br><span class="line">184</span><br><span class="line">185</span><br><span class="line">186</span><br><span class="line">187</span><br><span class="line">188</span><br><span class="line">189</span><br><span class="line">190</span><br><span class="line">191</span><br><span class="line">192</span><br><span class="line">193</span><br><span class="line">194</span><br><span class="line">195</span><br><span class="line">196</span><br><span class="line">197</span><br><span class="line">198</span><br><span class="line">199</span><br></pre></td><td class="code"><pre><span class="line">[root@compute kuryr-libnetwork]# cd &#x2F;var&#x2F;lib&#x2F;zun</span><br><span class="line">[root@compute zun]# git clone -b stable&#x2F;queens</span><br><span class="line">https:&#x2F;&#x2F;git.openstack.org&#x2F;openstack&#x2F;zun.git</span><br><span class="line">Cloning into &#39;zun&#39;...</span><br><span class="line">remote: Counting objects: 18434, done.</span><br><span class="line">remote: Compressing objects: 100% (10103&#x2F;10103), done.</span><br><span class="line">remote: Total 18434 (delta 14071), reused 11790 (delta 7990)</span><br><span class="line">Receiving objects: 100% (18434&#x2F;18434), 2.56 MiB | 98.00 KiB&#x2F;s, done.</span><br><span class="line">Resolving deltas: 100% (14071&#x2F;14071), done.</span><br><span class="line">[root@compute zun]# chown -R zun:zun zun</span><br><span class="line">[root@compute zun]# cd zun</span><br><span class="line">[root@compute zun]# pip install -r requirements.txt</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): PyYAML&gt;&#x3D;3.10 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 5))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages</span><br><span class="line">(from -r requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">keystonemiddleware&gt;&#x3D;4.17.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 7))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">jsonpatch!&#x3D;1.20,&gt;&#x3D;1.16 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pbr!&#x3D;2.1.0,&gt;&#x3D;2.0.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 9))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages</span><br><span class="line">(from -r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): python-etcd&gt;&#x3D;0.4.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 11))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-glanceclient&gt;&#x3D;2.8.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 12))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-neutronclient&gt;&#x3D;6.3.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 13))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-novaclient&gt;&#x3D;9.1.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 14))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-cinderclient&gt;&#x3D;3.3.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 15))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.i18n&gt;&#x3D;3.15.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 16))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.log&gt;&#x3D;3.36.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 17))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.concurrency&gt;&#x3D;3.25.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 18))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.config&gt;&#x3D;5.1.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 19))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.messaging&gt;&#x3D;5.29.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 20))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.middleware&gt;&#x3D;3.31.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 21))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.policy&gt;&#x3D;1.30.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 22))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.privsep&gt;&#x3D;1.23.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 23))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.serialization!&#x3D;2.19.1,&gt;&#x3D;2.18.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">-r requirements.txt (line 24))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">oslo.versionedobjects&gt;&#x3D;1.31.2 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 26))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.context&gt;&#x3D;2.19.2</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 27))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.utils&gt;&#x3D;3.33.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 28))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.db&gt;&#x3D;4.27.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 29))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): os-vif!&#x3D;1.8.0,&gt;&#x3D;1.7.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 30))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): os-brick&gt;&#x3D;2.2.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): six&gt;&#x3D;1.10.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 32))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): WSME&gt;&#x3D;0.8.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 33))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">SQLAlchemy!&#x3D;1.1.5,!&#x3D;1.1.6,!&#x3D;1.1.7,!&#x3D;1.1.8,&gt;&#x3D;1.0.10 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 34))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): stevedore&gt;&#x3D;1.20.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 35))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): docker&gt;&#x3D;2.4.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 36))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): netaddr&gt;&#x3D;0.7.18 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 37))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): neutron-lib&gt;&#x3D;1.13.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 38))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): websockify&gt;&#x3D;0.8.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r requirements.txt (line 39))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">websocket-client&lt;&#x3D;0.40.0,&gt;&#x3D;0.33.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from -r</span><br><span class="line">requirements.txt (line 40))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): enum-compat in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2-&gt;-r requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): greenlet&gt;&#x3D;0.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2-&gt;-r requirements.txt (line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): jsonpointer&gt;&#x3D;1.9 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from jsonpatch!&#x3D;1.20,&gt;&#x3D;1.16-&gt;-r</span><br><span class="line">requirements.txt (line 8))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): WebOb&gt;&#x3D;1.2dev in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Mako&gt;&#x3D;0.4.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): WebTest&gt;&#x3D;1.3.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): logutils&gt;&#x3D;0.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): singledispatch in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): urllib3&gt;&#x3D;1.7.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-etcd&gt;&#x3D;0.4.3-&gt;-r requirements.txt</span><br><span class="line">(line 11))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): dnspython&gt;&#x3D;1.13.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-etcd&gt;&#x3D;0.4.3-&gt;-r requirements.txt</span><br><span class="line">(line 11))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): monotonic&gt;&#x3D;0.6 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): PasteDeploy&gt;&#x3D;1.5.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Routes&gt;&#x3D;2.3.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Paste&gt;&#x3D;2.0.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r</span><br><span class="line">requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): Babel!&#x3D;2.4.0,&gt;&#x3D;2.3.4</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt</span><br><span class="line">(line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): requests&gt;&#x3D;2.14.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt</span><br><span class="line">(line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">retrying!&#x3D;1.3.0,&gt;&#x3D;1.2.3 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt (line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): os-win&gt;&#x3D;3.0.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from os-brick&gt;&#x3D;2.2.0-&gt;-r requirements.txt</span><br><span class="line">(line 31))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pytz in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from WSME&gt;&#x3D;0.8.0-&gt;-r requirements.txt (line</span><br><span class="line">33))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): simplegeneric in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from WSME&gt;&#x3D;0.8.0-&gt;-r requirements.txt (line</span><br><span class="line">33))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): docker-pycreds&gt;&#x3D;0.3.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from docker&gt;&#x3D;2.4.2-&gt;-r requirements.txt</span><br><span class="line">(line 36))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">backports.ssl-match-hostname&gt;&#x3D;3.5; python_version &lt; &quot;3.5&quot; in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from docker&gt;&#x3D;2.4.2-&gt;-r requirements.txt</span><br><span class="line">(line 36))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): ipaddress&gt;&#x3D;1.0.16;</span><br><span class="line">python_version &lt; &quot;3.3&quot; in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">docker&gt;&#x3D;2.4.2-&gt;-r requirements.txt (line 36))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): numpy in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from websockify&gt;&#x3D;0.8.0-&gt;-r</span><br><span class="line">requirements.txt (line 39))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): enum34 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">enum-compat-&gt;eventlet!&#x3D;0.18.3,!&#x3D;0.20.1,&lt;0.21.0,&gt;&#x3D;0.18.2-&gt;-r requirements.txt</span><br><span class="line">(line 6))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): MarkupSafe&gt;&#x3D;0.9.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">Mako&gt;&#x3D;0.4.0-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r requirements.txt</span><br><span class="line">(line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): waitress&gt;&#x3D;0.8.5 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">WebTest&gt;&#x3D;1.3.1-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r</span><br><span class="line">requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): beautifulsoup4 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">WebTest&gt;&#x3D;1.3.1-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r</span><br><span class="line">requirements.txt (line 10))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): repoze.lru&gt;&#x3D;0.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">Routes&gt;&#x3D;2.3.1-&gt;oslo.service!&#x3D;1.28.1,&gt;&#x3D;1.24.0-&gt;-r requirements.txt (line 25))</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): setuptools in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">waitress&gt;&#x3D;0.8.5-&gt;WebTest&gt;&#x3D;1.3.1-&gt;pecan!&#x3D;1.0.2,!&#x3D;1.0.3,!&#x3D;1.0.4,!&#x3D;1.2,&gt;&#x3D;1.0.0-&gt;-r</span><br><span class="line">requirements.txt (line 10))</span><br><span class="line">You are using pip version 8.1.2, however version 10.0.1 is available.</span><br><span class="line">You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.</span><br><span class="line">[root@compute zun]# python setup.py install</span><br></pre></td></tr></table></figure>
<h3 id="7-4-生成示例配置文件"><a href="#7-4-生成示例配置文件" class="headerlink" title="7.4 生成示例配置文件"></a>7.4 生成示例配置文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"># su -s &#x2F;bin&#x2F;sh -c &quot;oslo-config-generator --config-file</span><br><span class="line">etc&#x2F;zun&#x2F;zun-config-generator.conf&quot; zun</span><br><span class="line"># su -s &#x2F;bin&#x2F;sh -c &quot;cp etc&#x2F;zun&#x2F;zun.conf.sample &#x2F;etc&#x2F;zun&#x2F;zun.conf&quot; zun</span><br><span class="line"># su -s &#x2F;bin&#x2F;sh -c &quot;cp etc&#x2F;zun&#x2F;rootwrap.conf &#x2F;etc&#x2F;zun&#x2F;rootwrap.conf&quot; zun</span><br><span class="line"># su -s &#x2F;bin&#x2F;sh -c &quot;mkdir -p &#x2F;etc&#x2F;zun&#x2F;rootwrap.d&quot; zun</span><br><span class="line"># su -s &#x2F;bin&#x2F;sh -c &quot;cp etc&#x2F;zun&#x2F;rootwrap.d&#x2F;* &#x2F;etc&#x2F;zun&#x2F;rootwrap.d&#x2F;&quot; zun</span><br></pre></td></tr></table></figure>
<h3 id="7-5-配置zun用户"><a href="#7-5-配置zun用户" class="headerlink" title="7.5 配置zun用户"></a>7.5 配置zun用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"># echo &quot;zun ALL&#x3D;(root) NOPASSWD: &#x2F;usr&#x2F;local&#x2F;bin&#x2F;zun-rootwrap \\</span><br><span class="line">&#x2F;etc&#x2F;zun&#x2F;rootwrap.conf *&quot; | sudo tee &#x2F;etc&#x2F;sudoers.d&#x2F;zun-rootwrap</span><br></pre></td></tr></table></figure>
<h3 id="7-6-编辑配置文件，添加以下内容"><a href="#7-6-编辑配置文件，添加以下内容" class="headerlink" title="7.6 编辑配置文件，添加以下内容"></a>7.6 编辑配置文件，添加以下内容</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;zun&#x2F;zun.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">transport_url &#x3D; rabbit:&#x2F;&#x2F;openstack:000000@controller</span><br><span class="line">[DEFAULT]</span><br><span class="line">state_path &#x3D; &#x2F;var&#x2F;lib&#x2F;zun</span><br><span class="line">[database]</span><br><span class="line">connection &#x3D; mysql+pymysql:&#x2F;&#x2F;zun:000000@controller&#x2F;zun</span><br><span class="line">[keystone_auth]</span><br><span class="line">memcached_servers &#x3D; controller:11211</span><br><span class="line">www_authenticate_uri &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">project_domain_name &#x3D; default</span><br><span class="line">project_name &#x3D; service</span><br><span class="line">user_domain_name &#x3D; default</span><br><span class="line">password &#x3D; 000000</span><br><span class="line">username &#x3D; zun</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">auth_type &#x3D; password</span><br><span class="line">auth_version &#x3D; v3</span><br><span class="line">auth_protocol &#x3D; http</span><br><span class="line">service_token_roles_required &#x3D; True</span><br><span class="line">endpoint_type &#x3D; internalURL</span><br><span class="line">[keystone_authtoken]</span><br><span class="line">memcached_servers &#x3D; controller:11211</span><br><span class="line">www_authenticate_uri&#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">project_domain_name &#x3D; default</span><br><span class="line">project_name &#x3D; service</span><br><span class="line">user_domain_name &#x3D; default</span><br><span class="line">password &#x3D; 000000</span><br><span class="line">username &#x3D; zun</span><br><span class="line">auth_url &#x3D; http:&#x2F;&#x2F;controller:5000</span><br><span class="line">auth_type &#x3D; password</span><br><span class="line">[websocket_proxy]</span><br><span class="line">base_url &#x3D; ws:&#x2F;&#x2F;controller:6784&#x2F;</span><br><span class="line">[oslo_concurrency]</span><br><span class="line">lock_path &#x3D; &#x2F;var&#x2F;lib&#x2F;zun&#x2F;tmp</span><br></pre></td></tr></table></figure>
<h3 id="7-7-配置docker和kuryr"><a href="#7-7-配置docker和kuryr" class="headerlink" title="7.7 配置docker和kuryr"></a>7.7 配置docker和kuryr</h3><h4 id="7-7-1-创建docker配置文件夹"><a href="#7-7-1-创建docker配置文件夹" class="headerlink" title="7.7.1 创建docker配置文件夹"></a>7.7.1 创建docker配置文件夹</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute zun]# mkdir -p &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d</span><br></pre></td></tr></table></figure>
<h4 id="7-7-2-创建docker配置文件"><a href="#7-7-2-创建docker配置文件" class="headerlink" title="7.7.2 创建docker配置文件"></a>7.7.2 创建docker配置文件</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;docker.service.d&#x2F;docker.conf</span><br><span class="line">[Service]</span><br><span class="line">ExecStart&#x3D;</span><br><span class="line">ExecStart&#x3D;&#x2F;usr&#x2F;bin&#x2F;dockerd --group zun -H tcp:&#x2F;&#x2F;compute:2375 -H</span><br><span class="line">unix:&#x2F;&#x2F;&#x2F;var&#x2F;run&#x2F;docker.sock --cluster-store etcd:&#x2F;&#x2F;controller:2379</span><br></pre></td></tr></table></figure>
<h4 id="7-7-3-重启docker"><a href="#7-7-3-重启docker" class="headerlink" title="7.7.3 重启docker"></a>7.7.3 重启docker</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@compute zun]# systemctl daemon-reload</span><br><span class="line">[root@compute zun]# systemctl restart docker</span><br></pre></td></tr></table></figure>
<h4 id="7-7-4-编辑kuryr配置文件，添加以下内容"><a href="#7-7-4-编辑kuryr配置文件，添加以下内容" class="headerlink" title="7.7.4 编辑kuryr配置文件，添加以下内容"></a>7.7.4 编辑kuryr配置文件，添加以下内容</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;kuryr&#x2F;kuryr.conf</span><br><span class="line">[DEFAULT]</span><br><span class="line">capability_scope &#x3D; global</span><br></pre></td></tr></table></figure>
<h4 id="7-7-5-重启kuryr"><a href="#7-7-5-重启kuryr" class="headerlink" title="7.7.5 重启kuryr"></a>7.7.5 重启kuryr</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">[root@compute zun]# systemctl restart kuryr-libnetwork</span><br></pre></td></tr></table></figure>
<h3 id="7-8-创建启动文件"><a href="#7-8-创建启动文件" class="headerlink" title="7.8 创建启动文件"></a>7.8 创建启动文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"># vi &#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-compute.service</span><br><span class="line">[Unit]</span><br><span class="line">Description &#x3D; OpenStack Container Service Compute Agent</span><br><span class="line">[Service]</span><br><span class="line">ExecStart &#x3D; &#x2F;usr&#x2F;bin&#x2F;zun-compute</span><br><span class="line">User &#x3D; zun</span><br><span class="line">[Install]</span><br><span class="line">WantedBy &#x3D; multi-user.target</span><br></pre></td></tr></table></figure>
<h3 id="7-9-启动zun-compute"><a href="#7-9-启动zun-compute" class="headerlink" title="7.9 启动zun-compute"></a>7.9 启动zun-compute</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">[root@compute zun]# systemctl start zun-compute</span><br><span class="line">[root@compute zun]# systemctl enable zun-compute</span><br><span class="line">Created symlink from</span><br><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;multi-user.target.wants&#x2F;zun-compute.service to</span><br><span class="line">&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-compute.service.</span><br><span class="line">[root@compute zun]# systemctl status zun-compute</span><br><span class="line">● zun-compute.service - OpenStack Container Service Compute Agent</span><br><span class="line">Loaded: loaded (&#x2F;etc&#x2F;systemd&#x2F;system&#x2F;zun-compute.service; enabled; vendor preset:</span><br><span class="line">disabled)</span><br><span class="line">Active: active (running) since Wed 2018-06-20 11:06:37 EDT; 13s ago</span><br><span class="line">Main PID: 4923 (zun-compute)</span><br><span class="line">CGroup: &#x2F;system.slice&#x2F;zun-compute.service</span><br><span class="line">└─4923 &#x2F;usr&#x2F;bin&#x2F;python &#x2F;usr&#x2F;bin&#x2F;zun-compute</span><br><span class="line">Jun 20 11:06:37 compute systemd[1]: Started OpenStack Container Service Compute</span><br><span class="line">Agent.</span><br><span class="line">Jun 20 11:06:37 compute systemd[1]: Starting OpenStack Container Service Compute</span><br><span class="line">Agent...</span><br><span class="line">Jun 20 11:06:39 compute zun-compute[4923]: 2018-06-20 11:06:39.902 4923 INFO</span><br><span class="line">zun.cmd.compute [-] Starting server in PID 4923</span><br><span class="line">Jun 20 11:06:39 compute zun-compute[4923]: 2018-06-20 11:06:39.913 4923 INFO</span><br><span class="line">zun.container.driver [-] Loading container driver &#39;docke...Driver&#39;</span><br><span class="line">Jun 20 11:06:40 compute zun-compute[4923]: 2018-06-20 11:06:40.104 4923 INFO</span><br><span class="line">zun.container.driver [-] Loading container driver &#39;docke...Driver&#39;</span><br><span class="line">Jun 20 11:06:40 compute zun-compute[4923]: 2018-06-20 11:06:40.530 4923 WARNING</span><br><span class="line">zun.compute.compute_node_tracker [-] No compute node ... found.</span><br><span class="line">Jun 20 11:06:40 compute zun-compute[4923]: 2018-06-20 11:06:40.563 4923 INFO</span><br><span class="line">zun.compute.compute_node_tracker [-] Node created for :compute</span><br><span class="line">Hint: Some lines were ellipsized, use -l to show in full.</span><br></pre></td></tr></table></figure>
<h3 id="7-10-验证"><a href="#7-10-验证" class="headerlink" title="7.10 验证"></a>7.10 验证</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br></pre></td><td class="code"><pre><span class="line">controller节点验证</span><br><span class="line">[root@controller ~]# pip install python-zunclient&#x3D;&#x3D;1.1.0</span><br><span class="line">Collecting python-zunclient&#x3D;&#x3D;1.1.0</span><br><span class="line">Downloading</span><br><span class="line">https:&#x2F;&#x2F;files.pythonhosted.org&#x2F;packages&#x2F;5a&#x2F;9d&#x2F;95cd86eaf2c3a721abc28d8d3f1747f789b3e028a8ddf5098da9e69111f8&#x2F;python_zunclient-1.1.0-py2-none-any.whl</span><br><span class="line">(122kB)</span><br><span class="line">100% |████████████████████████████████| 122kB 86kB&#x2F;s</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">websocket-client&lt;&#x3D;0.40.0,&gt;&#x3D;0.33.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): osc-lib&gt;&#x3D;1.8.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): PyYAML&gt;&#x3D;3.10 in</span><br><span class="line">&#x2F;usr&#x2F;lib64&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.i18n&gt;&#x3D;3.15.3 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): oslo.utils&gt;&#x3D;3.33.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): docker&gt;&#x3D;2.4.2 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): keystoneauth1&gt;&#x3D;3.3.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">python-openstackclient&gt;&#x3D;3.12.0 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): pbr!&#x3D;2.1.0,&gt;&#x3D;2.0.0 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">PrettyTable&lt;0.8,&gt;&#x3D;0.7.1 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): six in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">websocket-client&lt;&#x3D;0.40.0,&gt;&#x3D;0.33.0-&gt;python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">backports.ssl_match_hostname in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">websocket-client&lt;&#x3D;0.40.0,&gt;&#x3D;0.33.0-&gt;python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): docker-pycreds&gt;&#x3D;0.3.0</span><br><span class="line">in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">docker&gt;&#x3D;2.4.2-&gt;python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): ipaddress&gt;&#x3D;1.0.16;</span><br><span class="line">python_version &lt; &quot;3.3&quot; in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">docker&gt;&#x3D;2.4.2-&gt;python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade):</span><br><span class="line">requests!&#x3D;2.18.0,&gt;&#x3D;2.14.2 in &#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">docker&gt;&#x3D;2.4.2-&gt;python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Requirement already satisfied (use --upgrade to upgrade): urllib3&#x3D;&#x3D;1.21.1 in</span><br><span class="line">&#x2F;usr&#x2F;lib&#x2F;python2.7&#x2F;site-packages (from</span><br><span class="line">requests!&#x3D;2.18.0,&gt;&#x3D;2.14.2-&gt;docker&gt;&#x3D;2.4.2-&gt;python-zunclient&#x3D;&#x3D;1.1.0)</span><br><span class="line">Installing collected packages: python-zunclient</span><br><span class="line">Successfully installed python-zunclient-1.1.0</span><br><span class="line">You are using pip version 8.1.2, however version 10.0.1 is available.</span><br><span class="line">You should consider upgrading via the &#39;pip install --upgrade pip&#39; command.</span><br><span class="line">[root@controller ~]# . admin-openrc</span><br><span class="line">[root@controller ~]# openstack appcontainer service list</span><br><span class="line">+----+---------+-------------+-------+----------+-----------------+---------------------------+---------------------------+</span><br><span class="line">| Id | Host | Binary | State | Disabled | Disabled Reason | Created At |</span><br><span class="line">Updated At |</span><br><span class="line">+----+---------+-------------+-------+----------+-----------------+---------------------------+---------------------------+</span><br><span class="line">| 1 | compute | zun-compute | down | False | None | 2018-06-20</span><br><span class="line">15:06:40+00:00 | 2018-06-20 15:08:40+00:00 |</span><br><span class="line">+----+---------+-------------+-------+----------+-----------------+---------------------------+---------------------------+</span><br></pre></td></tr></table></figure>
<h3 id="8-在controller节点启动一个容器实例"><a href="#8-在controller节点启动一个容器实例" class="headerlink" title="8 在controller节点启动一个容器实例"></a>8 在controller节点启动一个容器实例</h3><h4 id="8-1-查看网络"><a href="#8-1-查看网络" class="headerlink" title="8.1 查看网络"></a>8.1 查看网络</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack network list</span><br><span class="line">+--------------------------------------+--------------------+--------------------------------------+</span><br><span class="line">| ID | Name | Subnets |</span><br><span class="line">+--------------------------------------+--------------------+--------------------------------------+</span><br><span class="line">| 13c3ecb4-8f1b-46bc-b6dd-b11c0e9b918d | kuryr-net-9ab4903d |</span><br><span class="line">e5c0a1bf-5357-4423-9b7f-8092eff6e3d8 |</span><br><span class="line">| 5cdbccc3-7414-4830-b70d-a798221ee9e4 | provider |</span><br><span class="line">9bb47dec-a69c-4be1-a509-7dd4448aea70 |</span><br><span class="line">| 8e4e0de6-6a55-42cd-b3ab-5f11a02c4ca9 | selfservice |</span><br><span class="line">af931610-c2fc-4db4-9fa2-eab89efbba61 |</span><br><span class="line">+--------------------------------------+--------------------+--------------------------------------+</span><br></pre></td></tr></table></figure>
<h4 id="8-2-获取网络id"><a href="#8-2-获取网络id" class="headerlink" title="8.2 获取网络id"></a>8.2 获取网络id</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# export NET_ID&#x3D;$(openstack network list | awk &#39;&#x2F;</span><br><span class="line">selfservice &#x2F; &#123; print $2 &#125;&#39;)</span><br></pre></td></tr></table></figure>
<h4 id="8-3-创建容器"><a href="#8-3-创建容器" class="headerlink" title="8.3 创建容器"></a>8.3 创建容器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">[root@controller ~]# openstack appcontainer run --name container --net</span><br><span class="line">network&#x3D;$NET_ID cirros</span><br><span class="line">+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| Field | Value |</span><br><span class="line">+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br><span class="line">| addresses | None |</span><br><span class="line">| links | [&#123;u&#39;href&#39;:</span><br><span class="line">u&#39;http:&#x2F;&#x2F;controller:9517&#x2F;v1&#x2F;containers&#x2F;145f41f2-dc5f-4b04-9226-6ae248b6061f&#39;,</span><br><span class="line">u&#39;rel&#39;: u&#39;self&#39;&#125;, &#123;u&#39;href&#39;:</span><br><span class="line">u&#39;http:&#x2F;&#x2F;controller:9517&#x2F;containers&#x2F;145f41f2-dc5f-4b04-9226-6ae248b6061f&#39;,</span><br><span class="line">u&#39;rel&#39;: u&#39;bookmark&#39;&#125;] |</span><br><span class="line">| image | cirros |</span><br><span class="line">| labels | &#123;&#125; |</span><br><span class="line">| disk | 0 |</span><br><span class="line">| security_groups | None |</span><br><span class="line">| image_pull_policy | None |</span><br><span class="line">| user_id | a07017719a364efa913cae79bbddbe19 |</span><br><span class="line">| uuid | 145f41f2-dc5f-4b04-9226-6ae248b6061f |</span><br><span class="line">| hostname | None |</span><br><span class="line">| environment | &#123;&#125; |</span><br><span class="line">| memory | None |</span><br><span class="line">| project_id | 14774f73585d4ed48d5198c778645baa |</span><br><span class="line">| status | Error |</span><br><span class="line">| workdir | None |</span><br><span class="line">| auto_remove | False |</span><br><span class="line">| status_detail | None |</span><br><span class="line">| host | None |</span><br><span class="line">| image_driver | None |</span><br><span class="line">| task_state | None |</span><br><span class="line">| status_reason | No valid host was found. Is the appropriate service running?</span><br><span class="line">|</span><br><span class="line">| name | container |</span><br><span class="line">| restart_policy | None |</span><br><span class="line">| ports | None |</span><br><span class="line">| command | None |</span><br><span class="line">| runtime | None |</span><br><span class="line">| cpu | None |</span><br><span class="line">| interactive | False |</span><br><span class="line">+-------------------+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+</span><br></pre></td></tr></table></figure>
<h4 id="8-4-查看容器列表"><a href="#8-4-查看容器列表" class="headerlink" title="8.4 查看容器列表"></a>8.4 查看容器列表</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># openstack appcontainer list</span><br></pre></td></tr></table></figure>
<h4 id="8-5-执行sh命令"><a href="#8-5-执行sh命令" class="headerlink" title="8.5 执行sh命令"></a>8.5 执行sh命令</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># openstack appcontainer exec --interactive container &#x2F;bin&#x2F;sh</span><br></pre></td></tr></table></figure>
<h4 id="8-6-验证网络"><a href="#8-6-验证网络" class="headerlink" title="8.6 验证网络"></a>8.6 验证网络</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># ping -c 4 openstack.org;exit</span><br></pre></td></tr></table></figure>
<h4 id="8-7-停止容器"><a href="#8-7-停止容器" class="headerlink" title="8.7 停止容器"></a>8.7 停止容器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># openstack appcontainer stop container</span><br></pre></td></tr></table></figure>
<h4 id="8-8-删除容器"><a href="#8-8-删除容器" class="headerlink" title="8.8 删除容器"></a>8.8 删除容器</h4><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># openstack appcontainer delete container</span><br></pre></td></tr></table></figure>
<h2 id="9-安装zun-ui"><a href="#9-安装zun-ui" class="headerlink" title="9 安装zun-ui"></a>9 安装zun-ui</h2><h3 id="9-1-下载zun源文件"><a href="#9-1-下载zun源文件" class="headerlink" title="9.1 下载zun源文件"></a>9.1 下载zun源文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># git clone https:&#x2F;&#x2F;github.com&#x2F;openstack&#x2F;zun-ui</span><br></pre></td></tr></table></figure>
<h3 id="9-2-复制文件"><a href="#9-2-复制文件" class="headerlink" title="9.2 复制文件"></a>9.2 复制文件</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"># cp &#x2F;zun-ui&#x2F;zun_ui&#x2F;enabled&#x2F;_1330_project_container_panelgroup.py</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;openstack-dashboard&#x2F;openstack_dashboard&#x2F;local&#x2F;enabled&#x2F;</span><br><span class="line"># cp &#x2F;zun-ui&#x2F;zun_ui&#x2F;enabled&#x2F;_1331_project_container_containers_panel.py</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;openstack-dashboard&#x2F;openstack_dashboard&#x2F;local&#x2F;enabled&#x2F;</span><br><span class="line"># cp.&#x2F;zun-ui&#x2F;zun_ui&#x2F;enabled&#x2F;_2330_project_container_panelgroup.py</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;openstack-dashboard&#x2F;openstack_dashboard&#x2F;local&#x2F;enabled&#x2F;</span><br><span class="line"># cp &#x2F;zun-ui&#x2F;zun_ui&#x2F;enabled&#x2F;_2331_project_container_images_panel.py</span><br><span class="line">openstack_dashboard&#x2F;local&#x2F;enabled</span><br><span class="line"># cp &#x2F;zun-ui&#x2F;zun_ui&#x2F;enabled&#x2F;_0330_cloud_shell.py</span><br><span class="line">&#x2F;usr&#x2F;share&#x2F;openstack-dashboard&#x2F;openstack_dashboard&#x2F;local&#x2F;enabled&#x2F;</span><br></pre></td></tr></table></figure>
<h3 id="9-3-安装ui模块"><a href="#9-3-安装ui模块" class="headerlink" title="9.3 安装ui模块"></a>9.3 安装ui模块</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># pip install zun-ui</span><br></pre></td></tr></table></figure>
<h3 id="9-4-重启服务"><a href="#9-4-重启服务" class="headerlink" title="9.4 重启服务"></a>9.4 重启服务</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"># systemctl restart httpd memcached</span><br></pre></td></tr></table></figure>
    </div>

    
    
    

    <footer class="post-footer">
          

<div class="post-copyright">
<ul>
  <li class="post-copyright-author">
      <strong>本文作者： </strong>zerchin
  </li>
  <li class="post-copyright-link">
      <strong>本文链接：</strong>
      <a href="http://blog.zerchin.xyz/2018/10/04/openstack%EF%BC%88queens%EF%BC%89%E9%83%A8%E7%BD%B2Zun%E6%9C%8D%E5%8A%A1/" title="openstack（queens）部署Zun服务">http://blog.zerchin.xyz/2018/10/04/openstack（queens）部署Zun服务/</a>
  </li>
  <li class="post-copyright-license">
    <strong>版权声明： </strong>本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" rel="noopener" target="_blank"><i class="fab fa-fw fa-creative-commons"></i>BY-NC-SA</a> 许可协议。转载请注明出处！
  </li>
</ul>
</div>

          <div class="post-tags">
              <a href="/tags/openstack/" rel="tag"># openstack</a>
          </div>

        

          <div class="post-nav">
            <div class="post-nav-item">
                <a href="/2018/09/06/OpenStack-kilo%E7%89%88%E6%9C%ACcinder%E5%AF%B9%E6%8E%A5%E5%A4%9ACeph%E5%AD%98%E5%82%A8/" rel="prev" title="OpenStack-kilo版本cinder对接多Ceph存储">
                  <i class="fa fa-chevron-left"></i> OpenStack-kilo版本cinder对接多Ceph存储
                </a>
            </div>
            <div class="post-nav-item">
                <a href="/2019/01/16/Cobbler%E8%87%AA%E5%8A%A8%E5%8C%96/" rel="next" title="CentOS7 部署Cobbler(PXE)实现自动化安装Centos、Windows">
                  CentOS7 部署Cobbler(PXE)实现自动化安装Centos、Windows <i class="fa fa-chevron-right"></i>
                </a>
            </div>
          </div>
    </footer>
  </article>
</div>







<script>
  window.addEventListener('tabs:register', () => {
    let { activeClass } = CONFIG.comments;
    if (CONFIG.comments.storage) {
      activeClass = localStorage.getItem('comments_active') || activeClass;
    }
    if (activeClass) {
      const activeTab = document.querySelector(`a[href="#comment-${activeClass}"]`);
      if (activeTab) {
        activeTab.click();
      }
    }
  });
  if (CONFIG.comments.storage) {
    window.addEventListener('tabs:click', event => {
      if (!event.target.matches('.tabs-comment .tab-content .tab-pane')) return;
      const commentClass = event.target.classList[1];
      localStorage.setItem('comments_active', commentClass);
    });
  }
</script>
</div>
  </main>

  <footer class="footer">
    <div class="footer-inner">

  <div class="beian"><a href="https://beian.miit.gov.cn/" rel="noopener" target="_blank">null </a>
  </div>

<div class="copyright">
  &copy; 2018 – 
  <span itemprop="copyrightYear">2022</span>
  <span class="with-love">
    <i class="fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">zerchin</span>
</div>
<div class="busuanzi-count">
    <span class="post-meta-item" id="busuanzi_container_site_uv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-user"></i>
      </span>
      <span class="site-uv" title="总访客量">
        <span id="busuanzi_value_site_uv"></span>
      </span>
    </span>
    <span class="post-meta-item" id="busuanzi_container_site_pv" style="display: none;">
      <span class="post-meta-item-icon">
        <i class="fa fa-eye"></i>
      </span>
      <span class="site-pv" title="总访问量">
        <span id="busuanzi_value_site_pv"></span>
      </span>
    </span>
</div>

    </div>
  </footer>

  
  <script size="300" alpha="0.6" zIndex="-1" src="//cdn.jsdelivr.net/npm/ribbon.js@1.0.2/dist/ribbon.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/animejs@3.2.1/lib/anime.min.js"></script>
  <script src="//cdn.jsdelivr.net/npm/medium-zoom@1.0.6/dist/medium-zoom.min.js"></script>
<script src="/js/utils.js"></script><script src="/js/motion.js"></script><script src="/js/next-boot.js"></script>

  
  <script>
    (function(){
      var bp = document.createElement('script');
      var curProtocol = window.location.protocol.split(':')[0];
      bp.src = (curProtocol === 'https') ? 'https://zz.bdstatic.com/linksubmit/push.js' : 'http://push.zhanzhang.baidu.com/push.js';
      var s = document.getElementsByTagName("script")[0];
      s.parentNode.insertBefore(bp, s);
    })();
  </script>

<script src="/js/local-search.js"></script>





  <script>
    NProgress.configure({
      showSpinner: true
    });
    NProgress.start();
    document.addEventListener('readystatechange', () => {
      if (document.readyState === 'interactive') {
        NProgress.inc(0.8);
      }
      if (document.readyState === 'complete') {
        NProgress.done();
      }
    });
    document.addEventListener('pjax:send', () => {
      NProgress.start();
    });
    document.addEventListener('pjax:success', () => {
      NProgress.done();
    });
  </script>

  
  <script async src="https://busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js"></script>






</body>
</html>
